{"ast":null,"code":"import { testAPI } from \"../api/api\";\nconst GET_GOODS_AC = \"GET_GOODS_AC\";\nconst GET_GOODBYID_AC = \"GET_GOODBYID_AC\";\nconst REMOVE_GOODBYID_AC = \"REMOVE_GOODBYID_AC\";\nconst CHANGE_PAGE_SIZE_GOODS = \"CHANGE_PAGE_SIZE_GOODS\";\nconst CHANGE_PAGE_NUMBER_GOODS = \"CHANGE_PAGE_NUMBER_GOODS\";\nconst CHANGE_SORT_BY = \"CHANGE_SORT_BY\";\nconst CHANGE_FILTER = \"CHANGE_FILTER\";\nconst ClEAR_GOODS_AC = \"ClEAR_GOODS_AC\";\nlet initialState = {\n  goods: [],\n  filter: null,\n  filterBy: ['Рекомендации'],\n  pageSize: 3,\n  totalCount: 0,\n  pageNumber: 1,\n  goodItem: []\n};\n\nconst CatalogReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case GET_GOODS_AC:\n      return { ...state,\n        goods: [...action.dataGoods.goods],\n        totalCount: action.dataGoods.totalCount\n      };\n\n    case GET_GOODBYID_AC:\n      return { ...state,\n        goodItem: [action.goodItem]\n      };\n\n    case REMOVE_GOODBYID_AC:\n      return { ...state,\n        goodItem: null\n      };\n\n    case ClEAR_GOODS_AC:\n      return initialState;\n\n    case CHANGE_PAGE_SIZE_GOODS:\n      return { ...state,\n        pageSize: action.pageSize\n      };\n\n    case CHANGE_PAGE_NUMBER_GOODS:\n      return { ...state,\n        pageNumber: action.pageNumber\n      };\n\n    case CHANGE_SORT_BY:\n      return { ...state,\n        filterBy: action.filterBy\n      };\n\n    case CHANGE_FILTER:\n      debugger;\n      return { ...state,\n        goods: state.goods.filter(g => g.style == action.data.style && g.color == action.data.color && g.size == action.data.size)\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport const ClearGoods = () => ({\n  type: ClEAR_GOODS_AC\n});\nexport const changePageSize = pageSize => ({\n  type: CHANGE_PAGE_SIZE_GOODS,\n  pageSize\n});\nexport const changePageNumber = pageNumber => ({\n  type: CHANGE_PAGE_NUMBER_GOODS,\n  pageNumber\n});\nexport const changeSortBy = filterBy => ({\n  type: CHANGE_SORT_BY,\n  filterBy\n});\n\nconst getGoods = dataGoods => ({\n  type: GET_GOODS_AC,\n  dataGoods\n});\n\nconst getGood = goodItem => ({\n  type: GET_GOODBYID_AC,\n  goodItem\n});\n\nexport const removeGood = () => ({\n  type: REMOVE_GOODBYID_AC\n});\nexport const getGoodsForSlider = () => async dispatch => {\n  let response = await testAPI.getGoods();\n  dispatch(getGoods(response));\n};\nexport const getGoodsThunkById = id => async dispatch => {\n  let response = await testAPI.getGood(id);\n  var data = response.data.data.good;\n  data.reviews = response.data.data.review;\n  dispatch(getGood(data));\n};\nexport const getGoodsThunk = (pageNumber, pageSize, data) => (dispatch, getState) => {\n  debugger;\n  testAPI.changeFilter(data, pageSize, pageNumber).then(response => {\n    dispatch(changePageNumber(pageNumber));\n    dispatch(changePageSize(pageSize));\n    dispatch(getGoods(response.data));\n  });\n};\nexport default CatalogReducer;","map":{"version":3,"sources":["/Users/anton/Downloads/myApp-1/client/src/redux/CatalogReducer.js"],"names":["testAPI","GET_GOODS_AC","GET_GOODBYID_AC","REMOVE_GOODBYID_AC","CHANGE_PAGE_SIZE_GOODS","CHANGE_PAGE_NUMBER_GOODS","CHANGE_SORT_BY","CHANGE_FILTER","ClEAR_GOODS_AC","initialState","goods","filter","filterBy","pageSize","totalCount","pageNumber","goodItem","CatalogReducer","state","action","type","dataGoods","g","style","data","color","size","ClearGoods","changePageSize","changePageNumber","changeSortBy","getGoods","getGood","removeGood","getGoodsForSlider","dispatch","response","getGoodsThunkById","id","good","reviews","review","getGoodsThunk","getState","changeFilter","then"],"mappings":"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","sourcesContent":["import { testAPI } from \"../api/api\";\n\n\nconst GET_GOODS_AC = \"GET_GOODS_AC\";\nconst GET_GOODBYID_AC = \"GET_GOODBYID_AC\";\nconst REMOVE_GOODBYID_AC = \"REMOVE_GOODBYID_AC\";\nconst CHANGE_PAGE_SIZE_GOODS = \"CHANGE_PAGE_SIZE_GOODS\";\nconst CHANGE_PAGE_NUMBER_GOODS = \"CHANGE_PAGE_NUMBER_GOODS\";\nconst CHANGE_SORT_BY=\"CHANGE_SORT_BY\";\nconst CHANGE_FILTER=\"CHANGE_FILTER\";\nconst ClEAR_GOODS_AC=\"ClEAR_GOODS_AC\"\n\nlet initialState = {\n  goods: [],\n  filter:null,\n  filterBy:['Рекомендации'],\n  pageSize: 3,\n  totalCount: 0,\n  pageNumber: 1,\n  goodItem: [],\n};\n\nconst CatalogReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case GET_GOODS_AC:\n      return { ...state, goods: [...action.dataGoods.goods], totalCount: action.dataGoods.totalCount };\n    case GET_GOODBYID_AC:\n      return { ...state, goodItem: [action.goodItem] };\n    case REMOVE_GOODBYID_AC:\n      return { ...state, goodItem: null }\n      case ClEAR_GOODS_AC:\n        return initialState\n    case CHANGE_PAGE_SIZE_GOODS:\n      return { ...state, pageSize: action.pageSize }\n    case CHANGE_PAGE_NUMBER_GOODS:\n      return { ...state, pageNumber: action.pageNumber }\n    case CHANGE_SORT_BY:\n      return{...state,filterBy:action.filterBy}\n    case CHANGE_FILTER:\n      debugger\n      return{...state,goods:state.goods.filter(g=>g.style==action.data.style&&g.color==action.data.color&&g.size==action.data.size)}\n    default:\n      return state;\n  }\n};\n\nexport const ClearGoods=()=>({type:ClEAR_GOODS_AC})\nexport const changePageSize = (pageSize) => ({ type: CHANGE_PAGE_SIZE_GOODS, pageSize })\nexport const changePageNumber = (pageNumber) => ({type:CHANGE_PAGE_NUMBER_GOODS, pageNumber })\nexport const changeSortBy=(filterBy)=>({type:CHANGE_SORT_BY,filterBy});\n\n\n\n const getGoods = (dataGoods) => ({ type: GET_GOODS_AC, dataGoods });\nconst getGood = (goodItem) => ({ type: GET_GOODBYID_AC, goodItem });\nexport const removeGood = () => ({type: REMOVE_GOODBYID_AC});\n\n\nexport const getGoodsForSlider= () => async (dispatch) => {\n  let response = await testAPI.getGoods()\n  dispatch(getGoods(response));\n};\nexport const getGoodsThunkById = (id) => async (dispatch) => {\n  let response = await testAPI.getGood(id);\n  var data = response.data.data.good;\n  data.reviews = response.data.data.review;\n  dispatch(getGood(data));\n};\nexport const getGoodsThunk=(pageNumber,pageSize,data)=>(dispatch,getState)=>{\n  debugger\n  testAPI.changeFilter(data,pageSize,pageNumber).then(response=>{\n    dispatch(changePageNumber(pageNumber))\n    dispatch(changePageSize(pageSize))\n    dispatch(getGoods(response.data));\n  })\n}\n\nexport default CatalogReducer;\n"]},"metadata":{},"sourceType":"module"}