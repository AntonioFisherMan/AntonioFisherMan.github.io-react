{"ast":null,"code":"import { returnErrors, returnSuccess, clearErrors, clearSuccess } from './SuccessErrorReducer';\nimport { testAPI } from \"../api/api\";\nimport Cookies from 'js-cookie';\nconst USER_LOADING = \"USER_LOADING\";\nconst USER_LOADED = \"USER_LOADED\";\nconst AUTH_ERROR = \"AUTH_ERROR\";\nconst LOGIN_SUCCESS = \"LOGIN_SUCCESS\";\nconst LOGIN_FAIL = \"LOGIN_FAIL\";\nconst LOGOUT_SUCCESS = \"LOGOUT_SUCCESS\";\nconst REGISTER_SUCCESS = \"REGISTER_SUCCESS\";\nconst REGISTER_FAIL = \"REGISTER_FAIL\";\nconst FORGOT_PASS = \"FORGOT_PASS\";\nconst FORGOT_PASS_RESET = \"FORGOT_PASS_RESET\";\nconst EMAIL_SENT = \"EMAIL_SENT\";\nconst RESET_PASS = \"RESET_PASS\";\nconst RESET_ERROR = \"RESET_ERROR\";\nconst FORGOT_ERROR = \"FORGOT_ERROR\";\nconst initialState = {\n  token: sessionStorage.getItem(\"token\") || \"\",\n  isAuth: null,\n  isLoading: false,\n  user: null,\n  userInform: null,\n  forgotEmail: null,\n  emailSent: false\n};\n\nconst AuthReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case USER_LOADING:\n      return { ...state,\n        isLoading: true\n      };\n\n    case USER_LOADED:\n      sessionStorage.setItem('token', action.payload.token);\n      return { ...state,\n        isAuth: true,\n        user: action.payload.user,\n        userInform: action.userInform\n      };\n\n    case LOGIN_SUCCESS:\n    case REGISTER_SUCCESS:\n      Cookies.set('userInfo', {\n        user: action.payload\n      });\n      sessionStorage.setItem('token', action.payload.token);\n      return { ...state,\n        isAuth: true,\n        isLoading: false\n      };\n\n    case AUTH_ERROR:\n    case LOGIN_FAIL:\n    case REGISTER_FAIL:\n    case LOGOUT_SUCCESS:\n      sessionStorage.removeItem('token');\n      return { ...state,\n        isAuth: false,\n        isLoading: false,\n        user: null,\n        userInform: null,\n        token: null\n      };\n\n    case FORGOT_PASS:\n      return { ...state,\n        forgotEmail: action.forgotEmail\n      };\n\n    case EMAIL_SENT:\n      return { ...state,\n        emailSent: action.bool\n      };\n\n    case FORGOT_PASS_RESET:\n      return { ...state,\n        forgotEmail: action.forgotEmail,\n        emailSent: false\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport const userLoad = (payload, userInform) => ({\n  type: USER_LOADED,\n  payload,\n  userInform\n});\nexport const changePass = forgotEmail => ({\n  type: FORGOT_PASS,\n  forgotEmail\n});\nexport const emailSent = bool => ({\n  type: EMAIL_SENT,\n  bool\n});\nexport const resetEmailSentClear = forgotEmail => ({\n  type: FORGOT_PASS_RESET,\n  forgotEmail\n});\nexport const requestToken = () => (dispatch, getState) => {\n  testAPI.forgotPassword(getState().auth.forgotEmail).then(response => {\n    dispatch(emailSent(true));\n  }).catch(err => {\n    dispatch(returnErrors(err.response.data.message, err.response.status, 'FORGOT_ERROR'));\n    dispatch({\n      type: FORGOT_ERROR\n    });\n  });\n};\nexport const resetPass = (newPassword, verifyPassword, token) => dispatch => {\n  testAPI.resetPassword(newPassword, verifyPassword, token).then(response => {\n    dispatch({\n      type: RESET_PASS\n    });\n    dispatch(returnSuccess(response.data.message, response.status, 'SUCCESS_RESET'));\n  }).catch(err => {\n    dispatch(returnErrors(err.response.data, err.response.status, 'RESET_ERROR'));\n    dispatch({\n      type: RESET_ERROR\n    });\n  });\n};\nexport const changeUserPass = (oldPass, newPassword, verifyPassword) => (dispatch, getState) => {\n  testAPI.changeUserPass(oldPass, newPassword, verifyPassword, getState().auth.user.email).then(response => {\n    dispatch(returnSuccess(response.data.message, response.status, 'SUCCESS_CHANGE_PASS'));\n  }).catch(err => {\n    dispatch(returnErrors(err.response.data.message, err.response.status, 'ERROR_CHANGE_PASS'));\n  });\n};\nexport const getAuth = () => async (dispatch, getState) => {\n  try {\n    const token = getState().auth.token;\n    let response = await testAPI.getAuth(token);\n    dispatch(userLoad(response.data));\n  } catch (error) {\n    dispatch({\n      type: AUTH_ERROR\n    });\n  }\n};\nexport const login = (email, password, rememberMe) => async dispatch => {\n  dispatch({\n    type: USER_LOADING\n  });\n  testAPI.login(email, password, rememberMe).then(response => {\n    dispatch(userLoad(response.data, response.data.inform.inform));\n    dispatch({\n      type: LOGIN_SUCCESS,\n      payload: response.data\n    });\n  }).catch(err => {\n    dispatch(returnErrors(err.response.data.message, err.response.status, 'LOGIN_FAIL'));\n    dispatch({\n      type: LOGIN_FAIL\n    });\n  });\n};\nexport const register = (name, email, password) => dispatch => {\n  testAPI.register(name, email, password).then(response => {\n    debugger;\n    dispatch({\n      type: REGISTER_SUCCESS,\n      payload: response.data\n    });\n    dispatch(userLoad(response.data));\n  }).catch(err => {\n    dispatch(returnErrors(err.response.data.message, err.response.status, 'REGISTER_FAIL'));\n    dispatch({\n      type: REGISTER_FAIL\n    });\n  });\n};\nexport const logout = () => dispatch => {\n  dispatch({\n    type: LOGOUT_SUCCESS\n  });\n};\nexport const subscribeNewUser = email => dispatch => {\n  testAPI.subscribeNewUser(email).then(response => {\n    dispatch(returnSuccess(response.data.message, response.status, 'SUBSCRIBER_SUCCESS'));\n    const timer = setTimeout(() => {\n      dispatch(clearSuccess());\n    }, 3000);\n    return () => clearTimeout(timer);\n  }).catch(err => {\n    dispatch(returnErrors(err.response.data.message, err.response.status, 'SUBSCRIBER_FAIL'));\n  });\n};\nexport default AuthReducer;","map":{"version":3,"sources":["/Users/anton/Downloads/myApp-1/client/src/redux/AuthReducer.js"],"names":["returnErrors","returnSuccess","clearErrors","clearSuccess","testAPI","Cookies","USER_LOADING","USER_LOADED","AUTH_ERROR","LOGIN_SUCCESS","LOGIN_FAIL","LOGOUT_SUCCESS","REGISTER_SUCCESS","REGISTER_FAIL","FORGOT_PASS","FORGOT_PASS_RESET","EMAIL_SENT","RESET_PASS","RESET_ERROR","FORGOT_ERROR","initialState","token","sessionStorage","getItem","isAuth","isLoading","user","userInform","forgotEmail","emailSent","AuthReducer","state","action","type","setItem","payload","set","removeItem","bool","userLoad","changePass","resetEmailSentClear","requestToken","dispatch","getState","forgotPassword","auth","then","response","catch","err","data","message","status","resetPass","newPassword","verifyPassword","resetPassword","changeUserPass","oldPass","email","getAuth","error","login","password","rememberMe","inform","register","name","logout","subscribeNewUser","timer","setTimeout","clearTimeout"],"mappings":"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","sourcesContent":["\nimport {returnErrors,returnSuccess,clearErrors, clearSuccess} from './SuccessErrorReducer'\nimport { testAPI } from \"../api/api\";\nimport Cookies from 'js-cookie'\n\n const USER_LOADING=\"USER_LOADING\"\nconst USER_LOADED=\"USER_LOADED\"\nconst AUTH_ERROR=\"AUTH_ERROR\"\nconst LOGIN_SUCCESS=\"LOGIN_SUCCESS\"\nconst LOGIN_FAIL=\"LOGIN_FAIL\"\n const LOGOUT_SUCCESS=\"LOGOUT_SUCCESS\"\nconst REGISTER_SUCCESS=\"REGISTER_SUCCESS\"\nconst REGISTER_FAIL=\"REGISTER_FAIL\"\n\nconst FORGOT_PASS=\"FORGOT_PASS\"\nconst FORGOT_PASS_RESET=\"FORGOT_PASS_RESET\"\nconst EMAIL_SENT=\"EMAIL_SENT\"\nconst RESET_PASS=\"RESET_PASS\"\n\nconst RESET_ERROR=\"RESET_ERROR\"\nconst FORGOT_ERROR=\"FORGOT_ERROR\"\n\nconst initialState = {\n  token:sessionStorage.getItem(\"token\")||\"\",\n  isAuth: null,\n  isLoading: false,\n  user:null,\n  userInform:null,\n  forgotEmail:null,\n  emailSent:false\n};\n\nconst AuthReducer = (state = initialState, action) => {\n  switch (action.type) {\n\n    case USER_LOADING:\n      return { ...state, isLoading: true };\n      \n    case USER_LOADED:\n      sessionStorage.setItem('token',action.payload.token)\n      return { ...state,isAuth: true, user:action.payload.user,userInform:action.userInform};\n    case LOGIN_SUCCESS:\n    case REGISTER_SUCCESS:\n      Cookies.set('userInfo',{user:action.payload})\n      sessionStorage.setItem('token',action.payload.token)\n      return { ...state,isAuth: true, isLoading: false};\n    case AUTH_ERROR:\n    case LOGIN_FAIL:\n    case REGISTER_FAIL:\n    case LOGOUT_SUCCESS:\n      sessionStorage.removeItem('token')\n      return {\n        ...state,\n        isAuth: false,\n        isLoading: false,\n        user: null,\n        userInform:null,\n        token: null\n      };\n\n      case FORGOT_PASS:\n        return{...state,forgotEmail:action.forgotEmail}\n        case EMAIL_SENT:\n          return{...state,emailSent:action.bool}\n          case FORGOT_PASS_RESET:\n            return{...state,forgotEmail:action.forgotEmail,emailSent:false}\n    default:\n      return state;\n  }\n};\n\nexport const userLoad=(payload,userInform)=>({type:USER_LOADED,payload,userInform})\n\nexport const changePass=(forgotEmail)=>({type:FORGOT_PASS,forgotEmail})\nexport const emailSent=(bool)=>({type:EMAIL_SENT,bool})\nexport const resetEmailSentClear=(forgotEmail)=>({type:FORGOT_PASS_RESET,forgotEmail})\n\n\nexport const requestToken=()=>(dispatch,getState)=>{\n    testAPI.forgotPassword(getState().auth.forgotEmail).then(response=>{\n         dispatch(emailSent(true))\n    })\n    .catch(err=>{\n      dispatch(returnErrors(err.response.data.message,err.response.status,'FORGOT_ERROR'))\n      dispatch({type:FORGOT_ERROR})\n    })\n}\nexport const resetPass=(newPassword,verifyPassword,token)=> dispatch=>{\n  testAPI.resetPassword(newPassword,verifyPassword,token).then(response=>{\n    dispatch({type:RESET_PASS})\n    dispatch(returnSuccess(response.data.message,response.status,'SUCCESS_RESET'))\n  }).catch(err=>{\n    dispatch(returnErrors(err.response.data,err.response.status,'RESET_ERROR'))\n    dispatch({type:RESET_ERROR})\n  })\n}\n\nexport const changeUserPass=(oldPass,newPassword,verifyPassword)=>(dispatch,getState)=>{\n  testAPI.changeUserPass(oldPass,newPassword,verifyPassword,getState().auth.user.email).then(response=>{\n    dispatch(returnSuccess(response.data.message,response.status,'SUCCESS_CHANGE_PASS'))\n  }).catch(err=>{\n    dispatch(returnErrors(err.response.data.message,err.response.status,'ERROR_CHANGE_PASS'))\n  })\n}\n\n\n\nexport const getAuth=()=>async (dispatch,getState)=>{\n  try {\n    const token=getState().auth.token;\n     let response=await testAPI.getAuth(token)\n      dispatch(userLoad(response.data))\n  } catch (error) {\n    dispatch({type:AUTH_ERROR})\n  }\n}\nexport const login = (email,password,rememberMe) => async(dispatch) => {\n  dispatch({type:USER_LOADING})\n  testAPI.login(email,password,rememberMe).then(response=>{\n    dispatch(userLoad(response.data,response.data.inform.inform))\n    dispatch({type:LOGIN_SUCCESS,payload:response.data})\n  }).catch(err=>{\n    dispatch(returnErrors(err.response.data.message,err.response.status,'LOGIN_FAIL'))\n    dispatch({type:LOGIN_FAIL})\n  })\n};\n\nexport const register=(name,email,password)=>dispatch=>{\n  testAPI.register(name,email,password).then(response=>{\n    debugger\n    dispatch({type:REGISTER_SUCCESS,payload:response.data})\n    dispatch(userLoad(response.data))\n \n  }).catch(err=>{\n      dispatch(returnErrors(err.response.data.message,err.response.status,'REGISTER_FAIL'))\n       dispatch({type:REGISTER_FAIL})\n  })\n}\n\nexport const logout=()=>dispatch=>{\n  dispatch({type:LOGOUT_SUCCESS})\n\n}\n\nexport const subscribeNewUser=(email)=>dispatch=>{\n  testAPI.subscribeNewUser(email).then(response=>{\n    dispatch(returnSuccess(response.data.message,response.status,'SUBSCRIBER_SUCCESS'))\n    const timer = setTimeout(() => {\n      dispatch(clearSuccess())\n    }, 3000);\n    return () => clearTimeout(timer);\n  }).catch(err=>{\n    dispatch(returnErrors(err.response.data.message,err.response.status,'SUBSCRIBER_FAIL'))\n  })\n}\n\nexport default AuthReducer;\n"]},"metadata":{},"sourceType":"module"}