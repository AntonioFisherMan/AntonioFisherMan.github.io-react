{"ast":null,"code":"import * as axios from \"axios\";\nimport { saveProfile, savePhoto } from \"../redux/UsersReducer\";\nimport { STATES } from \"mongoose\";\nconst baseUrl = \"https://social-network.samuraijs.com/api/1.0/\";\nconst baseUrlTest = \"http://localhost:5000/\";\nlet instance = axios.create({\n  baseUrl: baseUrl,\n  withCredentials: true,\n  headers: {\n    \"API-KEY\": \"34b87ad1-2221-48b1-ac66-9b97be6c625a\"\n  }\n});\nlet instanceTest = axios.create(getState, {\n  baseUrlTest: baseUrlTest,\n  headers: {\n    \"x-auth-token\": getState().auth.token\n  }\n});\nexport const usersAPI = {\n  getUsers(currentPage = 1, pageSize = 10) {\n    return instance.get(baseUrl + `users?page=${currentPage}&count=${pageSize}`).then(response => response.data);\n  },\n\n  getStatus(user_id) {\n    return instance.get(baseUrl + `profile/status/${user_id}`).then(response => response.data);\n  },\n\n  updateStatus(status) {\n    return instance.put(baseUrl + 'profile/status/', {\n      status: status\n    }).then(response => response.data);\n  },\n\n  getProfileInform(user_id) {\n    return instance.get(baseUrl + `profile/${user_id}`);\n  },\n\n  saveProfile(profile) {\n    return instance.put(baseUrl + 'profile', profile);\n  },\n\n  savePhoto(photo) {\n    debugger;\n    const photoData = new FormData();\n    photoData.append(\"image\", photo);\n    return instance.put(baseUrl + 'profile/photo', photoData, {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    });\n  }\n\n};\nexport const authAPI = {\n  getAuth: () => instance.get(baseUrl + \"/auth/me\")\n};\nexport const testAPI = {\n  getMyUsers() {\n    return axios.get(\"http://localhost:5000/users\").then(response => response.data);\n  },\n\n  getGoods() {\n    return axios.get(\"http://localhost:5000/goods\").then(response => response.data);\n  },\n\n  login(email, password) {\n    return axios.post(\"http://localhost:5000/auth/\", {\n      email,\n      password\n    });\n  },\n\n  register(name, email, password) {\n    return axios.post(\"http://localhost:5000/users\", {\n      name,\n      email,\n      password\n    });\n  },\n\n  getAuth(token) {\n    return instanceTest.get(\"http://localhost:5000/auth/user\", {\n      headers: {\n        \"x-auth-token\": token\n      }\n    });\n  }\n\n};\nexport const securityAPI = {\n  getCaptchaUrl() {\n    return instance.get(baseUrl + 'security/get-captcha-url');\n  }\n\n};","map":{"version":3,"sources":["/Volumes/Anton/FullStack/myApp/client/src/api/api.js"],"names":["axios","saveProfile","savePhoto","STATES","baseUrl","baseUrlTest","instance","create","withCredentials","headers","instanceTest","getState","auth","token","usersAPI","getUsers","currentPage","pageSize","get","then","response","data","getStatus","user_id","updateStatus","status","put","getProfileInform","profile","photo","photoData","FormData","append","authAPI","getAuth","testAPI","getMyUsers","getGoods","login","email","password","post","register","name","securityAPI","getCaptchaUrl"],"mappings":"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","sourcesContent":["import * as axios from \"axios\";\nimport { saveProfile, savePhoto } from \"../redux/UsersReducer\";\nimport { STATES } from \"mongoose\";\n\nconst baseUrl=\"https://social-network.samuraijs.com/api/1.0/\";\nconst baseUrlTest=\"http://localhost:5000/\";\n\nlet instance = axios.create({\n  baseUrl: baseUrl,\n  withCredentials: true,\n  headers:{\n  \"API-KEY\":\"34b87ad1-2221-48b1-ac66-9b97be6c625a\"\n  }\n});\n\nlet instanceTest=axios.create(getState,{\n  baseUrlTest:baseUrlTest,\n  headers:{\n     \"x-auth-token\":getState().auth.token\n  }\n})\n\nexport const usersAPI = {\n  getUsers(currentPage = 1, pageSize = 10) {\n    return instance\n      .get(baseUrl + `users?page=${currentPage}&count=${pageSize}`)\n      .then(response => response.data);  \n  },\n  getStatus(user_id){\n    return instance.get(baseUrl+`profile/status/${user_id}`)\n    .then(response=>response.data)\n  },\n  updateStatus(status) {\n    return instance.put(baseUrl + 'profile/status/', {status: status})\n        .then(response => response.data)\n  },\n  getProfileInform(user_id){\n    return instance.get(baseUrl+`profile/${user_id}`)\n  },\n  saveProfile(profile){\n    return instance.put(baseUrl+'profile',profile)\n  },\n  savePhoto(photo){\n    debugger\n    const photoData=new FormData();\n    photoData.append(\"image\",photo);\n   return instance.put(baseUrl+'profile/photo',photoData,{\n     headers:{\n     'Content-Type':'multipart/form-data'\n     }\n   })\n  }\n}\n\nexport const authAPI = {\n  getAuth:()=>instance.get(baseUrl+\"/auth/me\"),\n};\n\nexport const testAPI={\n  getMyUsers(){\n    return axios.get(\"http://localhost:5000/users\")\n    .then(response=>response.data)\n  },\n  getGoods(){\n    return axios.get(\"http://localhost:5000/goods\")\n    .then(response=>response.data)\n  },\n  login(email,password){\n    return axios.post(\"http://localhost:5000/auth/\",{email,password})\n  },\n  register(name,email,password){\n    return axios.post(\"http://localhost:5000/users\",{name,email,password})\n  },\n  getAuth(token){\n    return instanceTest.get(\"http://localhost:5000/auth/user\",{headers:{\n      \"x-auth-token\":token\n  }})\n  }\n \n}\nexport const securityAPI={\n  getCaptchaUrl(){\n    return instance.get(baseUrl+'security/get-captcha-url'); \n  }\n}\n\n\n"]},"metadata":{},"sourceType":"module"}