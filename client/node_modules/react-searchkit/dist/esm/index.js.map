{"version":3,"file":"index.js","sources":["../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js","../../src/lib/api/contrib/elasticsearch/ESRequestSerializer.js","../../src/lib/api/contrib/elasticsearch/ESResponseSerializer.js","../../node_modules/regenerator-runtime/runtime.js","../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js","../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","../../src/lib/api/contrib/elasticsearch/ESSearchApi.js","../../src/lib/api/contrib/invenio/InvenioRequestSerializer.js","../../src/lib/api/contrib/invenio/InvenioResponseSerializer.js","../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js","../../src/lib/api/contrib/invenio/InvenioSearchApi.js","../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/superPropBase.js","../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/get.js","../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits.js","../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/typeof.js","../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper.js","../../src/lib/api/contrib/invenio/InvenioSuggestionApi.js","../../src/lib/api/UrlHandlerApi.js","../../src/lib/state/types/index.js","../../src/lib/state/selectors/query.js","../../src/lib/storeConfig.js","../../src/lib/state/reducers/query.js","../../src/lib/state/reducers/results.js","../../src/lib/state/reducers/index.js","../../src/lib/store.js","../../src/lib/state/actions/query.js","../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","../../src/lib/util.js","../../src/lib/components/ActiveFilters/ActiveFilters.js","../../src/lib/components/ActiveFilters/index.js","../../src/lib/components/BucketAggregation/BucketAggregationValues.js","../../src/lib/components/BucketAggregation/BucketAggregation.js","../../src/lib/components/BucketAggregation/index.js","../../node_modules/style-inject/dist/style-inject.es.js","../../src/lib/components/AutocompleteSearchBar/AutocompleteSearchBar.js","../../src/lib/components/AutocompleteSearchBar/index.js","../../src/lib/components/ShouldRender/ShouldRender.js","../../src/lib/components/Count/Count.js","../../src/lib/components/Count/index.js","../../src/lib/components/EmptyResults/EmptyResults.js","../../src/lib/components/EmptyResults/index.js","../../src/lib/components/Error/Error.js","../../src/lib/components/Error/index.js","../../src/lib/components/LayoutSwitcher/LayoutSwitcher.js","../../src/lib/components/LayoutSwitcher/index.js","../../src/lib/components/ResultsLoader/ResultsLoader.js","../../src/lib/components/ResultsLoader/index.js","../../src/lib/components/Pagination/Pagination.js","../../src/lib/components/Pagination/index.js","../../src/lib/components/Bootstrap/Bootstrap.js","../../src/lib/components/Bootstrap/index.js","../../src/lib/components/ReactSearchKit/ReactSearchKit.js","../../src/lib/components/ResultsGrid/ResultsGrid.js","../../src/lib/components/ResultsGrid/index.js","../../src/lib/components/ResultsList/ResultsList.js","../../src/lib/components/ResultsList/index.js","../../src/lib/components/ResultsMultiLayout/ResultsMultiLayout.js","../../src/lib/components/ResultsMultiLayout/index.js","../../src/lib/components/ResultsPerPage/ResultsPerPage.js","../../src/lib/components/ResultsPerPage/index.js","../../src/lib/components/SearchBar/SearchBar.js","../../src/lib/components/SearchBar/index.js","../../src/lib/components/Sort/Sort.js","../../src/lib/components/Sort/index.js","../../src/lib/components/SortBy/SortBy.js","../../src/lib/components/SortBy/index.js","../../src/lib/components/SortOrder/SortOrder.js","../../src/lib/components/SortOrder/index.js","../../src/lib/components/HOC/withState.js","../../src/lib/events.js"],"sourcesContent":["export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","/*\n * This file is part of React-SearchKit.\n * Copyright (C) 2019 CERN.\n *\n * React-SearchKit is free software; you can redistribute it and/or modify it\n * under the terms of the MIT License; see LICENSE file for more details.\n */\n\nimport _isEmpty from 'lodash/isEmpty';\n\nexport class ESRequestSerializer {\n  constructor() {\n    this.serialize = this.serialize.bind(this);\n  }\n\n  /**\n   * Return a serialized version of the app state `query` for the API backend.\n   * @param {object} stateQuery the `query` state to serialize\n   */\n  serialize(stateQuery) {\n    const { queryString, sortBy, sortOrder, page, size } = stateQuery;\n\n    const bodyParams = {};\n    if (!_isEmpty(queryString)) {\n      bodyParams['query'] = {\n        query_string: {\n          query: queryString,\n        },\n      };\n    }\n    if (sortBy) {\n      const sortObj = {};\n      sortObj[sortBy] = sortOrder && sortOrder === 'desc' ? 'desc' : 'asc';\n      bodyParams['sort'] = sortObj;\n    }\n\n    if (size > 0) {\n      bodyParams['size'] = size;\n    }\n\n    if (page > 0) {\n      const s = size > 0 ? size : 0;\n      const from = (page - 1) * s;\n      bodyParams['from'] = from;\n    }\n\n    return bodyParams;\n  }\n}\n","/*\n * This file is part of React-SearchKit.\n * Copyright (C) 2019 CERN.\n *\n * React-SearchKit is free software; you can redistribute it and/or modify it\n * under the terms of the MIT License; see LICENSE file for more details.\n */\n\nexport class ESResponseSerializer {\n  constructor() {\n    this.serialize = this.serialize.bind(this);\n  }\n\n  /**\n   * Return a serialized version of the API backend response for the app state `results`.\n   * @param {object} payload the backend response payload\n   */\n  serialize(payload) {\n    return {\n      aggregations: payload.aggregations || {},\n      hits: payload.hits.hits.map(hit => hit._source),\n      total: payload.hits.total.value,\n    };\n  }\n}\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] =\n    GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","module.exports = require(\"regenerator-runtime\");\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","/*\n * This file is part of React-SearchKit.\n * Copyright (C) 2019 CERN.\n *\n * React-SearchKit is free software; you can redistribute it and/or modify it\n * under the terms of the MIT License; see LICENSE file for more details.\n */\n\nimport _get from 'lodash/get';\nimport _hasIn from 'lodash/hasIn';\nimport axios from 'axios';\nimport { ESRequestSerializer } from './ESRequestSerializer';\nimport { ESResponseSerializer } from './ESResponseSerializer';\n\nexport class ESSearchApi {\n  constructor(config) {\n    this.axiosConfig = _get(config, 'axios', {});\n    this.validateAxiosConfig();\n    this.initSerializers(config);\n    this.initInterceptors(config);\n    this.initAxios();\n    this.search = this.search.bind(this);\n  }\n\n  validateAxiosConfig() {\n    if (!_hasIn(this.axiosConfig, 'url')) {\n      throw new Error('ESSearchApi config: `node` field is required.');\n    }\n  }\n\n  initInterceptors(config) {\n    this.requestInterceptor = _get(config, 'interceptors.request', undefined);\n    this.responseInterceptor = _get(config, 'interceptors.response', undefined);\n  }\n\n  initSerializers(config) {\n    const requestSerializerCls = _get(\n      config,\n      'es.requestSerializer',\n      ESRequestSerializer\n    );\n    const responseSerializerCls = _get(\n      config,\n      'es.responseSerializer',\n      ESResponseSerializer\n    );\n\n    this.requestSerializer = new requestSerializerCls();\n    this.responseSerializer = new responseSerializerCls();\n  }\n\n  initAxios() {\n    this.http = axios.create(this.axiosConfig);\n    this.addInterceptors();\n  }\n\n  addInterceptors() {\n    if (this.requestInterceptor) {\n      this.http.interceptors.request.use(\n        this.requestInterceptor.resolve,\n        this.requestInterceptor.reject\n      );\n    }\n    if (this.responseInterceptor) {\n      this.http.interceptors.request.use(\n        this.responseInterceptor.resolve,\n        this.responseInterceptor.reject\n      );\n    }\n  }\n\n  /**\n   * Perform the backend request to search and return the serialized list of results for the app state `results`.\n   * @param {string} stateQuery the `query` state with the user input\n   */\n  async search(stateQuery) {\n    const payload = this.requestSerializer.serialize(stateQuery);\n    const response = await this.http.request({\n      method: 'POST',\n      data: payload,\n    });\n    return this.responseSerializer.serialize(response.data);\n  }\n}\n","/*\n * This file is part of React-SearchKit.\n * Copyright (C) 2019 CERN.\n *\n * React-SearchKit is free software; you can redistribute it and/or modify it\n * under the terms of the MIT License; see LICENSE file for more details.\n */\n\nimport Qs from 'qs';\nimport _extend from 'lodash/extend';\n\n/** Default backend request serializer */\nexport class InvenioRequestSerializer {\n  constructor() {\n    this.serialize = this.serialize.bind(this);\n  }\n\n  _addFilter = (filter, filterUrlParams) => {\n    if (!Array.isArray(filter)) {\n      throw new Error(\n        `Filter value \"${filter}\" in query state must be an array.`\n      );\n    }\n    if (!(filter.length === 2 || filter.length === 3)) {\n      throw new Error(\n        `Filter value \"${filter}\" in query state must be an array of 2 or 3 elements`\n      );\n    }\n    const aggName = filter[0];\n    const fieldValue = filter[1];\n    filterUrlParams[aggName] = fieldValue;\n    const hasChild = filter.length === 3;\n    if (hasChild) {\n      this._addFilter(filter[2], filterUrlParams);\n    }\n  };\n\n  _addFilters = filters => {\n    if (!Array.isArray(filters)) {\n      throw new Error(`Filters query state \"${filters}\" must be an array.`);\n    }\n    /**\n     * input: [\n     *   [ 'type_agg', 'value1' ]\n     *   [ 'type_agg', 'value2', [ 'subtype_agg', 'a value' ] ]\n     * ]\n     */\n    const filterUrlParams = {};\n    filters.forEach(filter => {\n      this._addFilter(filter, filterUrlParams);\n    });\n    /**\n     * output: {\n     *  type_agg: 'value1'.\n     *  subtype_agg: 'a value'\n     * }\n     */\n    return filterUrlParams;\n  };\n\n  /**\n   * Return a serialized version of the app state `query` for the API backend.\n   * @param {object} stateQuery the `query` state to serialize\n   */\n  serialize(stateQuery) {\n    const { queryString, sortBy, sortOrder, page, size, filters } = stateQuery;\n\n    const getParams = {};\n    if (queryString !== null) {\n      getParams['q'] = queryString;\n    }\n    if (sortBy !== null) {\n      getParams['sort'] = sortBy;\n\n      if (sortOrder !== null) {\n        getParams['sort'] = sortOrder === 'desc' ? `-${sortBy}` : sortBy;\n      }\n    }\n    if (page > 0) {\n      getParams['page'] = page;\n    }\n    if (size > 0) {\n      getParams['size'] = size;\n    }\n    const filterParams = this._addFilters(filters);\n    _extend(getParams, filterParams);\n\n    return Qs.stringify(getParams, { arrayFormat: 'repeat' });\n  }\n}\n","/*\n * This file is part of React-SearchKit.\n * Copyright (C) 2019 CERN.\n *\n * React-SearchKit is free software; you can redistribute it and/or modify it\n * under the terms of the MIT License; see LICENSE file for more details.\n */\n\n/** Default backend response serializer */\nexport class InvenioResponseSerializer {\n  constructor() {\n    this.serialize = this.serialize.bind(this);\n  }\n\n  /**\n   * Return a serialized version of the API backend response for the app state `results`.\n   * @param {object} payload the backend response payload\n   */\n  serialize(payload) {\n    return {\n      aggregations: payload.aggregations || {},\n      hits: payload.hits.hits,\n      total: payload.hits.total,\n    };\n  }\n}\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"./defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","/*\n * This file is part of React-SearchKit.\n * Copyright (C) 2018-2019 CERN.\n *\n * React-SearchKit is free software; you can redistribute it and/or modify it\n * under the terms of the MIT License; see LICENSE file for more details.\n */\n\nimport _get from 'lodash/get';\nimport _hasIn from 'lodash/hasIn';\nimport axios from 'axios';\nimport { InvenioRequestSerializer } from './InvenioRequestSerializer';\nimport { InvenioResponseSerializer } from './InvenioResponseSerializer';\n\nexport class InvenioSearchApi {\n  constructor(config) {\n    this.axiosConfig = _get(config, 'axios', {});\n    this.validateAxiosConfig();\n    this.initSerializers(config);\n    this.initInterceptors(config);\n    this.initAxios();\n    this.search = this.search.bind(this);\n  }\n\n  validateAxiosConfig() {\n    if (!_hasIn(this.axiosConfig, 'url')) {\n      throw new Error('InvenioSearchApi config: `url` field is required.');\n    }\n  }\n\n  initInterceptors(config) {\n    this.requestInterceptor = _get(config, 'interceptors.request', undefined);\n    this.responseInterceptor = _get(config, 'interceptors.response', undefined);\n  }\n\n  initSerializers(config) {\n    const requestSerializerCls = _get(\n      config,\n      'invenio.requestSerializer',\n      InvenioRequestSerializer\n    );\n    const responseSerializerCls = _get(\n      config,\n      'invenio.responseSerializer',\n      InvenioResponseSerializer\n    );\n\n    this.requestSerializer = new requestSerializerCls();\n    this.responseSerializer = new responseSerializerCls();\n  }\n\n  initAxios() {\n    const axiosConfig = {\n      paramsSerializer: this.requestSerializer.serialize,\n      ...this.axiosConfig,\n    };\n    this.http = axios.create(axiosConfig);\n    this.addInterceptors();\n  }\n\n  addInterceptors() {\n    if (this.requestInterceptor) {\n      this.http.interceptors.request.use(\n        this.requestInterceptor.resolve,\n        this.requestInterceptor.reject\n      );\n    }\n    if (this.responseInterceptor) {\n      this.http.interceptors.request.use(\n        this.responseInterceptor.resolve,\n        this.responseInterceptor.reject\n      );\n    }\n  }\n\n  /**\n   * Perform the backend request to search and return the serialized list of results for the app state `results`.\n   * @param {string} stateQuery the `query` state with the user input\n   */\n  async search(stateQuery) {\n    const response = await this.http.request({\n      params: stateQuery,\n    });\n    return this.responseSerializer.serialize(response.data);\n  }\n}\n","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","import getPrototypeOf from \"./getPrototypeOf\";\nexport default function _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}","import superPropBase from \"./superPropBase\";\nexport default function _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","export default function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","import _typeof from \"../../helpers/esm/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","import getPrototypeOf from \"./getPrototypeOf\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct\";\nimport possibleConstructorReturn from \"./possibleConstructorReturn\";\nexport default function _createSuper(Derived) {\n  return function () {\n    var Super = getPrototypeOf(Derived),\n        result;\n\n    if (isNativeReflectConstruct()) {\n      var NewTarget = getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return possibleConstructorReturn(this, result);\n  };\n}","/*\n * This file is part of React-SearchKit.\n * Copyright (C) 2019 CERN.\n *\n * React-SearchKit is free software; you can redistribute it and/or modify it\n * under the terms of the MIT License; see LICENSE file for more details.\n */\n\nimport _get from 'lodash/get';\nimport _hasIn from 'lodash/hasIn';\nimport Qs from 'qs';\nimport { InvenioSearchApi } from './InvenioSearchApi';\n\nclass InvenioSuggestionRequestSerializer {\n  constructor(queryField) {\n    this.queryField = queryField;\n    this.serialize = this.serialize.bind(this);\n  }\n\n  /**\n   * Return a serialized version of the app state `query` for the API backend.\n   * @param {object} stateQuery the `query` state to serialize\n   */\n  serialize(stateQuery) {\n    const { suggestionString } = stateQuery;\n\n    const getParams = {};\n    if (suggestionString !== null) {\n      getParams['q'] = this.queryField + ':' + suggestionString;\n    }\n\n    return Qs.stringify(getParams, { arrayFormat: 'repeat', encode: false });\n  }\n}\n\nclass InvenioSuggestionResponseSerializer {\n  constructor(responseField) {\n    this.responseFieldPath = responseField.split('.');\n    this.serialize = this.serialize.bind(this);\n  }\n\n  _serializeSuggestions = responseHits => {\n    return Array.from(\n      new Set(\n        responseHits.map(hit => _get(hit.metadata, this.responseFieldPath))\n      )\n    );\n  };\n\n  /**\n   * Return a serialized version of the API backend response for the app state `suggestions`.\n   * @param {object} payload the backend response payload\n   */\n  serialize(payload) {\n    return {\n      suggestions: this._serializeSuggestions(payload.hits.hits || []),\n    };\n  }\n}\n\nexport class InvenioSuggestionApi extends InvenioSearchApi {\n  validateConfig(config) {\n    super.validateConfig(config);\n\n    if (!_hasIn(config, 'invenio.suggestions.queryField')) {\n      throw new Error(\n        'InvenioSuggestionApi config: `invenio.suggestions.queryField` is required.'\n      );\n    }\n    if (!_hasIn(config, 'invenio.suggestions.responseField')) {\n      throw new Error(\n        'InvenioSuggestionApi config: `invenio.suggestions.queryField` is responseField.'\n      );\n    }\n  }\n\n  initSerializers(config) {\n    const requestSerializerCls = _get(\n      config,\n      'invenio.requestSerializer',\n      InvenioSuggestionRequestSerializer\n    );\n    const responseSerializerCls = _get(\n      config,\n      'invenio.responseSerializer',\n      InvenioSuggestionResponseSerializer\n    );\n\n    this.requestSerializer = new requestSerializerCls(\n      config.invenio.suggestions.queryField\n    );\n    this.responseSerializer = new responseSerializerCls(\n      config.invenio.suggestions.responseField\n    );\n  }\n}\n","/*\n * This file is part of React-SearchKit.\n * Copyright (C) 2018-2019 CERN.\n *\n * React-SearchKit is free software; you can redistribute it and/or modify it\n * under the terms of the MIT License; see LICENSE file for more details.\n */\n\nimport Qs from 'qs';\nimport _isString from 'lodash/isString';\nimport _isBoolean from 'lodash/isBoolean';\nimport _isObject from 'lodash/isObject';\nimport _isNaN from 'lodash/isNaN';\nimport _isNil from 'lodash/isNil';\nimport _cloneDeep from 'lodash/cloneDeep';\n\nconst pushHistory = query => {\n  if (window.history.pushState) {\n    window.history.pushState({ path: query }, '', query);\n  }\n};\n\nconst replaceHistory = query => {\n  if (window.history.replaceState) {\n    window.history.replaceState({ path: query }, '', query);\n  }\n};\n\n/** Default URL parser implementation */\nclass UrlParser {\n  constructor() {\n    this.parse = this.parse.bind(this);\n  }\n\n  _sanitizeParamValue = value => {\n    let parsedValue = parseInt(value);\n    if (_isNaN(parsedValue)) {\n      try {\n        const _value = JSON.parse(value);\n        if (!_isNil(_value)) {\n          parsedValue = _value;\n        }\n      } catch (e) {\n        if (value !== 'undefined') {\n          parsedValue = value;\n        } else {\n          console.error(`Cannot parse value ${value}.`);\n        }\n      }\n    }\n    return parsedValue;\n  };\n\n  /**\n   * Parse the URL query string and return an object with all the params.\n   * @param {string} queryString the query string to parse\n   */\n  parse(queryString = '') {\n    const parsedParams = Qs.parse(queryString, { ignoreQueryPrefix: true });\n    const params = {};\n    Object.entries(parsedParams).forEach(entry => {\n      const key = entry[0];\n      const value = entry[1];\n      params[key] = this._sanitizeParamValue(value);\n    });\n    return params;\n  }\n}\n\n/** Default implementation for a param validator class */\nclass UrlParamValidator {\n  /**\n   * Return true if the param value is valid, false otherwise\n   * @param {object} queryState the `query` state\n   * @param {boolean} updateUrlQueryString a flag to push the new updated version of `query` state to the URL query string\n   */\n  isValid = (key, value) => true;\n}\n\n/** Object responsible to update the URL query string and parse it to update the app state */\nexport class UrlHandlerApi {\n  constructor(config = {}) {\n    this.urlParamsMapping = _isObject(config.urlParamsMapping)\n      ? config.urlParamsMapping\n      : {\n          queryString: 'q',\n          sortBy: 'sort',\n          sortOrder: 'order',\n          page: 'p',\n          size: 's',\n          layout: 'l',\n          filters: 'f',\n        };\n\n    this.keepHistory =\n      config.keepHistory !== undefined ? config.keepHistory : true;\n    if (!_isBoolean(this.keepHistory)) {\n      throw new Error(\n        `\"keepHistory configuration must be a boolean, ${this.keepHistory} provided.`\n      );\n    }\n\n    this.urlFilterSeparator =\n      config.urlFilterSeparator !== undefined ? config.urlFilterSeparator : '+';\n    if (!_isString(this.urlFilterSeparator)) {\n      throw new Error(\n        `\"urlFilterSeparator configuration must be a string, ${this.urlFilterSeparator} provided.`\n      );\n    }\n\n    this.urlParamValidator =\n      config.urlParamValidator || new UrlParamValidator();\n    this.urlParser = config.urlParser || new UrlParser();\n\n    // build the serializer from URL params to Query state by flipping the urlParamsMapping\n    this.fromUrlParamsMapping = {};\n    Object.keys(this.urlParamsMapping).forEach(stateKey => {\n      this.fromUrlParamsMapping[this.urlParamsMapping[stateKey]] = stateKey;\n    });\n\n    this.get = this.get.bind(this);\n    this.set = this.set.bind(this);\n    this.replace = this.replace.bind(this);\n  }\n\n  /**\n   * Map filters from list to string that is human readable\n   * [ 'type', 'photo', [ 'subtype', 'png' ]] => type:photo+subtype:png\n   */\n  _filterListToString = filter => {\n    const childFilter =\n      filter.length === 3\n        ? this.urlFilterSeparator.concat(this._filterListToString(filter[2]))\n        : '';\n    return `${filter[0]}:${filter[1]}${childFilter}`;\n  };\n\n  /**\n   * Map each query state field to an URL param\n   */\n  _mapQueryStateToUrlParams = queryState => {\n    const params = {};\n    Object.keys(queryState)\n      .filter(stateKey => stateKey in this.urlParamsMapping)\n      .filter(stateKey => {\n        // filter out negative or null values\n        if (\n          (stateKey === 'page' || stateKey === 'size') &&\n          queryState[stateKey] <= 0\n        ) {\n          return false;\n        }\n        return queryState[stateKey] !== null;\n      })\n      .forEach(stateKey => {\n        const paramKey = this.urlParamsMapping[stateKey];\n        if (stateKey === 'filters') {\n          params[paramKey] = queryState[stateKey].map(filter =>\n            this._filterListToString(filter)\n          );\n        } else {\n          params[paramKey] = queryState[stateKey];\n        }\n      });\n\n    // will omit undefined and null values from the query\n    return Qs.stringify(params, {\n      addQueryPrefix: true,\n      skipNulls: true,\n      indices: false, // order for filters params is not important, remove indices\n    });\n  };\n\n  /**\n   * Map filters from string to list\n   * type:photo+subtype:png => [ 'type', 'photo', [ 'subtype', 'png' ]]\n   */\n  _filterStringToList = filterStr => {\n    const childSepPos = filterStr.indexOf(this.urlFilterSeparator);\n    const hasChild = childSepPos > -1;\n\n    const aggNamePos = filterStr.indexOf(':');\n    if (aggNamePos === -1) {\n      throw new Error(\n        `Filter \"${filterStr}\" not parsable. Format expected: \"<agg name>:<value>\"`\n      );\n    }\n    const aggName = filterStr.slice(0, aggNamePos);\n    const end = hasChild ? childSepPos : filterStr.length;\n    const value = filterStr.slice(aggNamePos + 1, end);\n    let filterList = [aggName, value];\n    if (hasChild) {\n      const childFilter = filterStr.slice(childSepPos + 1, filterStr.length);\n      filterList.push(this._filterStringToList(childFilter));\n    }\n    return filterList;\n  };\n\n  /**\n   * Map each URL param to a query state field\n   */\n  _mapUrlParamsToQueryState = urlParamsObj => {\n    const result = {};\n    Object.keys(urlParamsObj).forEach(paramKey => {\n      if (this.urlParamValidator.isValid(paramKey, urlParamsObj[paramKey])) {\n        const queryStateKey = this.fromUrlParamsMapping[paramKey];\n        result[queryStateKey] = urlParamsObj[paramKey];\n        // custom transformation for filters\n        if (queryStateKey === 'filters') {\n          if (!Array.isArray(urlParamsObj[paramKey])) {\n            // if only 1 filter, create an array with one element\n            urlParamsObj[paramKey] = [urlParamsObj[paramKey]];\n          }\n          result[queryStateKey] = urlParamsObj[paramKey].map(filter =>\n            this._filterStringToList(filter)\n          );\n        }\n      }\n    });\n    return result;\n  };\n\n  _mergeParamsIntoState = (urlStateObj, queryState) => {\n    const _queryState = _cloneDeep(queryState);\n    Object.keys(urlStateObj).forEach(stateKey => {\n      if (stateKey in _queryState) {\n        _queryState[stateKey] = urlStateObj[stateKey];\n      }\n    });\n    return _queryState;\n  };\n\n  /**\n   * Return a new version of the given `query` state with updated values parsed from the URL query string.\n   * @param {object} queryState the `query` state\n   */\n  get(queryState) {\n    const urlParamsObj = this.urlParser.parse(window.location.search);\n    const urlStateObj = this._mapUrlParamsToQueryState(urlParamsObj);\n    const newQueryState = this._mergeParamsIntoState(urlStateObj, queryState);\n    const newUrlParams = this._mapQueryStateToUrlParams(newQueryState);\n    replaceHistory(newUrlParams);\n    return newQueryState;\n  }\n\n  /**\n   * Update the URL query string parameters from the given `query` state\n   * @param {object} stateQuery the `query` state\n   */\n  set(stateQuery) {\n    if (this.keepHistory) {\n      const newUrlParams = this._mapQueryStateToUrlParams(stateQuery);\n      pushHistory(newUrlParams);\n    } else {\n      this.replace(stateQuery);\n    }\n  }\n\n  /**\n   * Replace the URL query string parameters from the given `query` state\n   * @param {object} stateQuery the `query` state\n   */\n  replace(stateQuery) {\n    const newUrlParams = this._mapQueryStateToUrlParams(stateQuery);\n    replaceHistory(newUrlParams);\n  }\n}\n","/*\n * This file is part of React-SearchKit.\n * Copyright (C) 2018 CERN.\n *\n * React-SearchKit is free software; you can redistribute it and/or modify it\n * under the terms of the MIT License; see LICENSE file for more details.\n */\n\nexport const SET_QUERY_COMPONENT_INITIAL_STATE =\n  'SET_QUERY_COMPONENT_INITIAL_STATE';\nexport const SET_QUERY_STRING = 'SET_QUERY_STRING';\nexport const SET_QUERY_SORTING = 'SET_QUERY_SORTING';\nexport const SET_QUERY_SORT_BY = 'SET_QUERY_SORT_BY';\nexport const SET_QUERY_SORT_ORDER = 'SET_QUERY_SORT_ORDER';\nexport const SET_QUERY_STATE = 'SET_QUERY_STATE';\nexport const SET_QUERY_PAGINATION_PAGE = 'SET_QUERY_PAGINATION_PAGE';\nexport const SET_QUERY_PAGINATION_SIZE = 'SET_QUERY_PAGINATION_SIZE';\nexport const SET_QUERY_FILTERS = 'SET_QUERY_FILTERS';\nexport const SET_QUERY_SUGGESTIONS = 'SET_QUERY_SUGGESTIONS';\nexport const SET_SUGGESTION_STRING = 'SET_SUGGESTION_STRING';\nexport const CLEAR_QUERY_SUGGESTIONS = 'CLEAR_QUERY_SUGGESTIONS';\n\nexport const RESULTS_LOADING = 'RESULTS_LOADING';\nexport const RESULTS_FETCH_SUCCESS = 'RESULTS_FETCH_SUCCESS';\nexport const RESULTS_FETCH_ERROR = 'RESULTS_FETCH_ERROR';\nexport const RESULTS_UPDATE_LAYOUT = 'RESULTS_UPDATE_LAYOUT';\nexport const SET_RESULTS_COMPONENT_INITIAL_STATE =\n  'SET_RESULTS_COMPONENT_INITIAL_STATE';\nexport const RESET_QUERY = 'RESET_QUERY';\n","/*\n * This file is part of React-SearchKit.\n * Copyright (C) 2018-2019 CERN.\n *\n * React-SearchKit is free software; you can redistribute it and/or modify it\n * under the terms of the MIT License; see LICENSE file for more details.\n */\n\nimport Qs from 'qs';\nimport _forEach from 'lodash/forEach';\nimport _head from 'lodash/head';\nimport _isArray from 'lodash/isArray';\nimport _isEmpty from 'lodash/isEmpty';\nimport _pick from 'lodash/pick';\n\n/**\n * Return true if the first string starts and contains the second.\n * @param {string} first a string\n * @param {string} second a string\n */\nfunction startsWith(first, second) {\n  return first.indexOf(second) === 0;\n}\n\nfunction toString(array) {\n  return Qs.stringify({ q: array });\n}\n\nfunction parse(str) {\n  return Qs.parse(str)['q'];\n}\n\nfunction removeLastChild(arr) {\n  const hasChild = arr.length === 3;\n  if (hasChild) {\n    const result = [arr[0], arr[1]];\n    const lastChild = removeLastChild(arr[2]);\n    if (lastChild.length) {\n      result.push(lastChild);\n    }\n    return result;\n  }\n  return [];\n}\n\nfunction updateFilter(queryFilter, stateFilters) {\n  /**\n   * convert query and state to strings so they can be compared\n   */\n  const strQuery = toString(queryFilter);\n  const strStateFilters = stateFilters.map(stateObjQuery =>\n    toString(stateObjQuery)\n  );\n\n  /**\n   * filter out any state that starts with the query or any parent of the query\n   * e.g. query = ['file_type', 'pdf']\n   *      state = [[ 'file_type', 'pdf' ]]\n   *      filtered = []\n   *\n   *      query = [ 'type', 'publication' ]\n   *      state = [['type', 'publication', ['subtype', 'report' ]]\n   *      filtered = []\n   *\n   *      query = ['type', 'publication', ['subtype', 'report']]]\n   *      state = [[ 'type', 'publication' ]]\n   *      filtered = []\n   */\n  let anyRemoved = false;\n  const filteredStrStates = strStateFilters.filter(strStateFilter => {\n    const childFilterExists = startsWith(strStateFilter, strQuery);\n    const parentFilterExists = startsWith(strQuery, strStateFilter);\n\n    if (childFilterExists && !anyRemoved) {\n      anyRemoved = true;\n    }\n    return !childFilterExists && !parentFilterExists;\n  });\n\n  if (!anyRemoved) {\n    /**\n     * if nothing has been removed, it means it was not previously there, so\n     * the user query has to be added.\n     * e.g. query = ['type', 'publication', ['subtype', 'report']]\n     *      state = []\n     *      filtered = [['type', 'publication', ['subtype', 'report']]]\n     */\n    filteredStrStates.push(strQuery);\n  } else {\n    /**\n     * if a filter has been removed, it might have been a child. Add its parent if it is the root parent.\n     * e.g. query = ['type', 'publication', 'subtype', 'report']\n     *      state = [['type', 'publication', ['subtype', 'report']]]\n     *      filtered = [['type', 'publication']]\n     */\n    const hasChild = queryFilter.length === 3;\n    if (hasChild) {\n      const arr = removeLastChild(queryFilter);\n      filteredStrStates.push(toString(arr));\n    }\n  }\n\n  /**\n   * convert back to lists\n   */\n  return filteredStrStates.map(strState => parse(strState));\n}\n\nexport const updateQueryFilters = (queryFilter, stateFilters) => {\n  if (_isEmpty(queryFilter)) return;\n\n  /** If we have one filter as query = ['file_type', 'pdf'] */\n  if (!_isArray(_head(queryFilter))) {\n    return updateFilter(queryFilter, stateFilters);\n  }\n\n  /** If we have an array of filters as query we apply the filters one by one.\n   * e.g. query = [['file_type', 'pdf'], ['file_type', 'txt']]\n   */\n  let tempStateFilters = stateFilters;\n  _forEach(\n    queryFilter,\n    filter => (tempStateFilters = updateFilter(filter, tempStateFilters))\n  );\n  return tempStateFilters;\n};\n\nexport const updateQueryState = (oldState, newState, storeKeys) => {\n  let pickedState = _pick(newState, storeKeys);\n  if ('filters' in pickedState) {\n    pickedState['filters'] = updateQueryFilters(\n      pickedState.filters,\n      oldState.filters\n    );\n  }\n  return pickedState;\n};\n","/*\n * This file is part of React-SearchKit.\n * Copyright (C) 2018-2020 CERN.\n *\n * React-SearchKit is free software; you can redistribute it and/or modify it\n * under the terms of the MIT License; see LICENSE file for more details.\n */\n\nexport const INITIAL_STORE_STATE = {\n  queryString: '',\n  suggestions: [],\n  sortBy: null,\n  sortOrder: null,\n  page: -1,\n  size: -1,\n  filters: [],\n  layout: null,\n};\n\nexport const STORE_KEYS = Object.keys(INITIAL_STORE_STATE);\n","/*\n * This file is part of React-SearchKit.\n * Copyright (C) 2018-2019 CERN.\n *\n * React-SearchKit is free software; you can redistribute it and/or modify it\n * under the terms of the MIT License; see LICENSE file for more details.\n */\n\nimport {\n  SET_QUERY_COMPONENT_INITIAL_STATE,\n  SET_QUERY_STRING,\n  SET_QUERY_SORTING,\n  SET_QUERY_SORT_BY,\n  SET_QUERY_SORT_ORDER,\n  SET_QUERY_PAGINATION_PAGE,\n  SET_QUERY_PAGINATION_SIZE,\n  SET_QUERY_FILTERS,\n  SET_QUERY_SUGGESTIONS,\n  SET_QUERY_STATE,\n  SET_SUGGESTION_STRING,\n  CLEAR_QUERY_SUGGESTIONS,\n  RESULTS_UPDATE_LAYOUT,\n  RESET_QUERY,\n} from '../types';\nimport { updateQueryFilters, updateQueryState } from '../selectors';\nimport { STORE_KEYS } from '../../storeConfig';\n\nexport default (state = {}, action) => {\n  switch (action.type) {\n    case SET_QUERY_STRING:\n      return { ...state, queryString: action.payload, page: 1 };\n    case SET_QUERY_SORTING:\n      return {\n        ...state,\n        sortBy: action.payload.sortBy,\n        sortOrder: action.payload.sortOrder,\n        page: 1,\n      };\n    case SET_QUERY_SORT_BY:\n      return {\n        ...state,\n        sortBy: action.payload,\n        page: 1,\n      };\n    case SET_QUERY_SORT_ORDER:\n      return {\n        ...state,\n        sortOrder: action.payload,\n        page: 1,\n      };\n    case SET_QUERY_PAGINATION_PAGE:\n      return {\n        ...state,\n        page: action.payload,\n      };\n    case SET_QUERY_PAGINATION_SIZE:\n      return {\n        ...state,\n        size: action.payload,\n        page: 1,\n      };\n    case SET_QUERY_FILTERS: {\n      return {\n        ...state,\n        page: 1,\n        filters: updateQueryFilters(action.payload, state.filters),\n      };\n    }\n    case SET_QUERY_SUGGESTIONS:\n      return {\n        ...state,\n        suggestions: action.payload.suggestions,\n      };\n    case CLEAR_QUERY_SUGGESTIONS:\n      return {\n        ...state,\n        suggestions: action.payload.suggestions,\n      };\n    case SET_SUGGESTION_STRING:\n      return {\n        ...state,\n        suggestionString: action.payload,\n      };\n    case SET_QUERY_COMPONENT_INITIAL_STATE:\n      return {\n        ...state,\n        ...action.payload,\n      };\n    case SET_QUERY_STATE:\n      return {\n        ...state,\n        ...updateQueryState(state, action.payload, STORE_KEYS),\n      };\n    case RESULTS_UPDATE_LAYOUT:\n      return {\n        ...state,\n        layout: action.payload,\n      };\n    case RESET_QUERY:\n      return {\n        ...state,\n        queryString: '',\n        page: 1,\n        filters: [],\n      };\n    default:\n      return state;\n  }\n};\n","/*\n * This file is part of React-SearchKit.\n * Copyright (C) 2018-2019 CERN.\n *\n * React-SearchKit is free software; you can redistribute it and/or modify it\n * under the terms of the MIT License; see LICENSE file for more details.\n */\n\nimport {\n  RESULTS_LOADING,\n  RESULTS_FETCH_SUCCESS,\n  RESULTS_FETCH_ERROR,\n} from '../types';\n\nexport default (state = {}, action) => {\n  switch (action.type) {\n    case RESULTS_LOADING:\n      return {\n        ...state,\n        loading: true,\n        data: {\n          ...state.data,\n        },\n      };\n    case RESULTS_FETCH_SUCCESS:\n      return {\n        loading: false,\n        data: {\n          ...state.data,\n          aggregations: action.payload.aggregations,\n          hits: action.payload.hits,\n          total: action.payload.total,\n        },\n        error: {},\n      };\n    case RESULTS_FETCH_ERROR:\n      return {\n        loading: false,\n        data: {\n          ...state.data,\n          aggregations: {},\n          hits: [],\n          total: 0,\n        },\n        error: action.payload,\n      };\n    default:\n      return state;\n  }\n};\n","/*\n * This file is part of React-SearchKit.\n * Copyright (C) 2018 CERN.\n *\n * React-SearchKit is free software; you can redistribute it and/or modify it\n * under the terms of the MIT License; see LICENSE file for more details.\n */\n\nimport { combineReducers } from 'redux';\n\nimport queryReducer from './query';\nimport resultsReducer from './results';\n\nexport default combineReducers({\n  query: queryReducer,\n  results: resultsReducer,\n});\n","/*\n * This file is part of React-SearchKit.\n * Copyright (C) 2018-2019 CERN.\n *\n * React-SearchKit is free software; you can redistribute it and/or modify it\n * under the terms of the MIT License; see LICENSE file for more details.\n */\n\nimport { createStore, applyMiddleware } from 'redux';\nimport { connect } from 'react-redux';\nimport thunk from 'redux-thunk';\n\nimport rootReducer from './state/reducers';\nimport { INITIAL_STORE_STATE } from './storeConfig';\n\nexport function configureStore(appConfig) {\n  const initialQueryState = INITIAL_STORE_STATE;\n\n  const initialResultsState = {\n    loading: appConfig.searchOnInit,\n    data: {\n      hits: [],\n      total: 0,\n      aggregations: {},\n    },\n    error: {},\n  };\n\n  // configure the initial state\n  const preloadedQueryState = appConfig.urlHandlerApi\n    ? appConfig.urlHandlerApi.get(initialQueryState)\n    : initialQueryState;\n  const preloadedState = {\n    query: preloadedQueryState,\n    results: initialResultsState,\n  };\n  return createStore(\n    rootReducer,\n    preloadedState,\n    applyMiddleware(thunk.withExtraArgument(appConfig))\n  );\n}\n\nfunction connectExtended(mapStateToProps, mapDispatchToProps, mergeProps) {\n  return connect(mapStateToProps, mapDispatchToProps, mergeProps);\n}\n\nexport { connectExtended as connect };\n","/*\n * This file is part of React-SearchKit.\n * Copyright (C) 2018-2019 CERN.\n *\n * React-SearchKit is free software; you can redistribute it and/or modify it\n * under the terms of the MIT License; see LICENSE file for more details.\n */\n\nimport _cloneDeep from 'lodash/cloneDeep';\nimport {\n  SET_QUERY_COMPONENT_INITIAL_STATE,\n  SET_QUERY_STRING,\n  SET_QUERY_SORTING,\n  SET_QUERY_SORT_BY,\n  SET_QUERY_SORT_ORDER,\n  SET_QUERY_STATE,\n  SET_QUERY_PAGINATION_PAGE,\n  SET_QUERY_PAGINATION_SIZE,\n  SET_QUERY_FILTERS,\n  SET_QUERY_SUGGESTIONS,\n  SET_SUGGESTION_STRING,\n  CLEAR_QUERY_SUGGESTIONS,\n  RESET_QUERY,\n  RESULTS_LOADING,\n  RESULTS_FETCH_SUCCESS,\n  RESULTS_FETCH_ERROR,\n  RESULTS_UPDATE_LAYOUT,\n} from '../types';\n\nexport const setInitialState = initialState => {\n  return dispatch => {\n    dispatch({\n      type: SET_QUERY_COMPONENT_INITIAL_STATE,\n      payload: initialState,\n    });\n  };\n};\n\nexport const onAppInitialized = searchOnInit => {\n  return dispatch => {\n    if (searchOnInit) {\n      dispatch(executeQuery({ shouldUpdateUrlQueryString: false }));\n    }\n  };\n};\n\nexport const updateQueryString = queryString => {\n  return dispatch => {\n    dispatch({\n      type: SET_QUERY_STRING,\n      payload: queryString,\n    });\n    dispatch(executeQuery());\n  };\n};\n\nexport const updateQuerySorting = (sortByValue, sortOrderValue) => {\n  return dispatch => {\n    dispatch({\n      type: SET_QUERY_SORTING,\n      payload: { sortBy: sortByValue, sortOrder: sortOrderValue },\n    });\n    dispatch(executeQuery());\n  };\n};\n\nexport const updateQuerySortBy = sortByValue => {\n  return dispatch => {\n    dispatch({\n      type: SET_QUERY_SORT_BY,\n      payload: sortByValue,\n    });\n    dispatch(executeQuery());\n  };\n};\n\nexport const updateQuerySortOrder = sortOrderValue => {\n  return dispatch => {\n    dispatch({ type: SET_QUERY_SORT_ORDER, payload: sortOrderValue });\n    dispatch(executeQuery());\n  };\n};\n\nexport const updateQueryPaginationPage = page => {\n  return dispatch => {\n    dispatch({ type: SET_QUERY_PAGINATION_PAGE, payload: page });\n    dispatch(executeQuery());\n  };\n};\n\nexport const updateQueryPaginationSize = size => {\n  return dispatch => {\n    dispatch({ type: SET_QUERY_PAGINATION_SIZE, payload: size });\n    dispatch(executeQuery());\n  };\n};\n\nexport const updateQueryFilters = filters => {\n  return dispatch => {\n    dispatch({\n      type: SET_QUERY_FILTERS,\n      payload: filters,\n    });\n    dispatch(executeQuery());\n  };\n};\n\nexport const updateResultsLayout = layout => {\n  return async (dispatch, getState, config) => {\n    const urlHandlerApi = config.urlHandlerApi;\n    if (urlHandlerApi) {\n      await dispatch({\n        type: RESULTS_UPDATE_LAYOUT,\n        payload: layout,\n      });\n      const newStateQuery = getState().query;\n      urlHandlerApi.set(newStateQuery);\n    } else {\n      dispatch({\n        type: RESULTS_UPDATE_LAYOUT,\n        payload: layout,\n      });\n    }\n  };\n};\n\nexport const resetQuery = () => {\n  return dispatch => {\n    dispatch({\n      type: RESET_QUERY,\n    });\n    dispatch(executeQuery());\n  };\n};\n\nexport const executeQuery = ({\n  shouldUpdateUrlQueryString = true,\n  shouldReplaceUrlQueryString = false,\n} = {}) => {\n  return async (dispatch, getState, config) => {\n    const queryState = _cloneDeep(getState().query);\n    const searchApi = config.searchApi;\n    const urlHandlerApi = config.urlHandlerApi;\n\n    if (urlHandlerApi) {\n      if (shouldReplaceUrlQueryString) {\n        urlHandlerApi.replace(queryState);\n      } else if (shouldUpdateUrlQueryString) {\n        urlHandlerApi.set(queryState);\n      }\n    }\n\n    dispatch({ type: RESULTS_LOADING });\n    try {\n      const response = await searchApi.search(queryState);\n      dispatch({\n        type: RESULTS_FETCH_SUCCESS,\n        payload: {\n          aggregations: response.aggregations,\n          hits: response.hits,\n          total: response.total,\n        },\n      });\n    } catch (reason) {\n      console.error(reason);\n      dispatch({ type: RESULTS_FETCH_ERROR, payload: reason });\n    }\n  };\n};\n\nexport const updateSuggestions = suggestionString => {\n  return dispatch => {\n    dispatch({\n      type: SET_SUGGESTION_STRING,\n      payload: suggestionString,\n    });\n    dispatch(executeSuggestionQuery());\n  };\n};\n\nexport const executeSuggestionQuery = () => {\n  return async (dispatch, getState, config) => {\n    const queryState = _cloneDeep(getState().query);\n    const suggestionApi = config.suggestionApi;\n\n    try {\n      const response = await suggestionApi.search(queryState);\n      dispatch({\n        type: SET_QUERY_SUGGESTIONS,\n        payload: {\n          suggestions: response.suggestions,\n        },\n      });\n    } catch (reason) {\n      console.error('Could not load suggestions due to: ' + reason);\n    }\n  };\n};\n\nexport const clearSuggestions = () => {\n  return dispatch => {\n    dispatch({\n      type: CLEAR_QUERY_SUGGESTIONS,\n      payload: {\n        suggestions: [],\n      },\n    });\n  };\n};\n\nexport const updateQueryState = queryState => {\n  return dispatch => {\n    dispatch({\n      type: SET_QUERY_STATE,\n      payload: queryState,\n    });\n    dispatch(executeQuery());\n  };\n};\n","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","import objectWithoutPropertiesLoose from \"./objectWithoutPropertiesLoose\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}","/*\n * This file is part of React-SearchKit.\n * Copyright (C) 2020 CERN.\n *\n * React-SearchKit is free software; you can redistribute it and/or modify it\n * under the terms of the MIT License; see LICENSE file for more details.\n */\n\n/**\n * Build namespaced unique identifier.\n * @param {string} elementName component element name\n * @param {string} overridableId unique identifier passed as prop to overridable component\n */\nexport function buildUID(elementName, overridableId) {\n  return `${elementName}${overridableId && `.${overridableId}`}`;\n}\n","/*\n * This file is part of React-SearchKit.\n * Copyright (C) 2018-2019 CERN.\n *\n * React-SearchKit is free software; you can redistribute it and/or modify it\n * under the terms of the MIT License; see LICENSE file for more details.\n */\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Label, Icon } from 'semantic-ui-react';\nimport Overridable from 'react-overridable';\nimport { buildUID } from '../../util';\n\nclass ActiveFilters extends Component {\n  constructor(props) {\n    super(props);\n    this.updateQueryFilters = props.updateQueryFilters;\n  }\n\n  _getLabel = (filter) => {\n    const aggName = filter[0];\n    let value = filter[1];\n    let currentFilter = [aggName, value];\n    const hasChild = filter.length === 3;\n    if (hasChild) {\n      const { label, activeFilter } = this._getLabel(filter[2]);\n      value = `${value}.${label}`;\n      currentFilter.push(activeFilter);\n    }\n    return {\n      label: value,\n      activeFilter: currentFilter,\n    };\n  };\n\n  render() {\n    const { filters, overridableId } = this.props;\n    return (\n      !!filters.length && (\n        <Element\n          filters={filters}\n          removeActiveFilter={this.updateQueryFilters}\n          getLabel={this._getLabel}\n          overridableId={overridableId}\n        />\n      )\n    );\n  }\n}\n\nActiveFilters.propTypes = {\n  filters: PropTypes.array.isRequired,\n  updateQueryFilters: PropTypes.func.isRequired,\n  renderElement: PropTypes.func,\n  overridableId: PropTypes.string,\n};\n\nActiveFilters.defaultProps = {\n  renderElement: null,\n  overridableId: '',\n};\n\nconst Element = ({ overridableId, ...props }) => {\n  const { filters, removeActiveFilter, getLabel } = props;\n  return (\n    <Overridable\n      id={buildUID('ActiveFilters.element', overridableId)}\n      {...props}\n    >\n      <>\n        {filters.map((filter, index) => {\n          const { label, activeFilter } = getLabel(filter);\n          return (\n            <Label\n              image\n              key={index}\n              onClick={() => removeActiveFilter(activeFilter)}\n            >\n              {label}\n              <Icon name=\"delete\" />\n            </Label>\n          );\n        })}\n      </>\n    </Overridable>\n  );\n};\n\nexport default Overridable.component('ActiveFilters', ActiveFilters);\n","/*\n * This file is part of React-SearchKit.\n * Copyright (C) 2018-2019 CERN.\n *\n * React-SearchKit is free software; you can redistribute it and/or modify it\n * under the terms of the MIT License; see LICENSE file for more details.\n */\n\nimport { connect } from '../../store';\nimport { updateQueryFilters } from '../../state/actions';\nimport ActiveFiltersComponent from './ActiveFilters';\n\nconst mapDispatchToProps = dispatch => ({\n  updateQueryFilters: filter => dispatch(updateQueryFilters(filter)),\n});\n\nexport const ActiveFilters = connect(\n  state => ({\n    filters: state.query.filters,\n  }),\n  mapDispatchToProps\n)(ActiveFiltersComponent);\n","/*\n * This file is part of React-SearchKit.\n * Copyright (C) 2018 CERN.\n *\n * React-SearchKit is free software; you can redistribute it and/or modify it\n * under the terms of the MIT License; see LICENSE file for more details.\n */\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Checkbox, List } from 'semantic-ui-react';\nimport Overridable from 'react-overridable';\nimport { buildUID } from '../../util';\n\nclass BucketAggregationValues extends Component {\n  constructor(props) {\n    super(props);\n    this.field = props.field;\n    this.aggName = props.aggName;\n    this.childAgg = props.childAgg;\n    this.onFilterClicked = props.onFilterClicked;\n  }\n\n  _isSelected = (aggName, value, selectedFilters) => {\n    // return True there is at least one filter that has this value\n    return (\n      selectedFilters.filter(\n        (filter) => filter[0] === aggName && filter[1] === value\n      ).length >= 1\n    );\n  };\n\n  getChildAggCmps = (bucket, selectedFilters) => {\n    const hasChildAggregation =\n      this.childAgg && this.childAgg['aggName'] in bucket;\n    let selectedChildFilters = [];\n    if (hasChildAggregation) {\n      const childBuckets = bucket[this.childAgg['aggName']]['buckets'];\n      selectedFilters.forEach((filter) => {\n        const isThisAggregation = filter[0] === this.aggName;\n        const isThisValue = filter[1] === bucket.key;\n        const hasChild = filter.length === 3;\n        if (isThisAggregation && isThisValue && hasChild) {\n          selectedChildFilters.push(filter[2]);\n        }\n      });\n      const onFilterClicked = (value) => {\n        this.onFilterClicked([this.aggName, bucket.key, value]);\n      };\n      return (\n        <BucketAggregationValues\n          buckets={childBuckets}\n          selectedFilters={selectedChildFilters}\n          field={this.childAgg.field}\n          aggName={this.childAgg.aggName}\n          childAgg={this.childAgg.childAgg}\n          onFilterClicked={onFilterClicked}\n        />\n      );\n    }\n    return null;\n  };\n\n  render() {\n    const { buckets, selectedFilters, overridableId } = this.props;\n\n    const valuesCmp = buckets.map((bucket) => {\n      const isSelected = this._isSelected(\n        this.aggName,\n        bucket.key,\n        selectedFilters\n      );\n      const onFilterClicked = (value) => {\n        this.onFilterClicked([this.aggName, value]);\n      };\n      const getChildAggCmps = (bucket) =>\n        this.getChildAggCmps(bucket, selectedFilters);\n      return (\n        <ValueElement\n          key={bucket.key}\n          bucket={bucket}\n          isSelected={isSelected}\n          onFilterClicked={onFilterClicked}\n          getChildAggCmps={getChildAggCmps}\n          overridableId={overridableId}\n        />\n      );\n    });\n    return (\n      <ContainerElement valuesCmp={valuesCmp} overridableId={overridableId} />\n    );\n  }\n}\n\nBucketAggregationValues.propTypes = {\n  buckets: PropTypes.array.isRequired,\n  selectedFilters: PropTypes.array.isRequired,\n  field: PropTypes.string.isRequired,\n  aggName: PropTypes.string.isRequired,\n  childAgg: PropTypes.shape({\n    field: PropTypes.string.isRequired,\n    aggName: PropTypes.string.isRequired,\n    childAgg: PropTypes.object,\n  }),\n  onFilterClicked: PropTypes.func.isRequired,\n  overridableId: PropTypes.string,\n};\n\nBucketAggregationValues.defaultProps = {\n  overridableId: '',\n};\n\nconst ValueElement = (props) => {\n  const {\n    bucket,\n    isSelected,\n    onFilterClicked,\n    getChildAggCmps,\n    overridableId,\n  } = props;\n  const label = `${bucket.key} (${bucket.doc_count})`;\n  const childAggCmps = getChildAggCmps(bucket);\n  return (\n    <Overridable\n      id={buildUID('BucketAggregationValues.element', overridableId)}\n      {...props}\n    >\n      <List.Item key={bucket.key}>\n        <Checkbox\n          label={label}\n          value={bucket.key}\n          onClick={() => onFilterClicked(bucket.key)}\n          checked={isSelected}\n        />\n        {childAggCmps}\n      </List.Item>\n    </Overridable>\n  );\n};\n\nconst ContainerElement = ({ valuesCmp, overridableId }) => (\n  <Overridable\n    id={buildUID('BucketAggregationContainer.element', overridableId)}\n    valuesCmp={valuesCmp}\n  >\n    <List>{valuesCmp}</List>\n  </Overridable>\n);\n\nexport default Overridable.component(\n  'BucketAggregationValues',\n  BucketAggregationValues\n);\n","/*\n * This file is part of React-SearchKit.\n * Copyright (C) 2019 CERN.\n *\n * React-SearchKit is free software; you can redistribute it and/or modify it\n * under the terms of the MIT License; see LICENSE file for more details.\n */\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Card } from 'semantic-ui-react';\nimport _get from 'lodash/get';\nimport Overridable from 'react-overridable';\nimport BucketAggregationValues from './BucketAggregationValues';\nimport { buildUID } from '../../util';\n\nclass BucketAggregation extends Component {\n  constructor(props) {\n    super(props);\n    this.title = props.title;\n    this.agg = props.agg;\n    this.updateQueryFilters = props.updateQueryFilters;\n  }\n\n  onFilterClicked = (filter) => {\n    this.updateQueryFilters(filter);\n  };\n\n  _renderValues = (resultBuckets, selectedFilters) => {\n    const { overridableId } = this.props;\n    return (\n      <BucketAggregationValues\n        buckets={resultBuckets}\n        selectedFilters={selectedFilters}\n        field={this.agg.field}\n        aggName={this.agg.aggName}\n        childAgg={this.agg.childAgg}\n        onFilterClicked={this.onFilterClicked}\n        overridableId={overridableId}\n      />\n    );\n  };\n\n  _getSelectedFilters = (userSelectionFilters) => {\n    // get selected filters for this field only\n    return userSelectionFilters.filter(\n      (filter) => filter[0] === this.agg.aggName\n    );\n  };\n\n  _getResultBuckets = (resultsAggregations) => {\n    // get buckets of this field\n    const thisAggs = _get(resultsAggregations, this.agg.aggName, {});\n    return 'buckets' in thisAggs ? thisAggs['buckets'] : [];\n  };\n\n  render() {\n    const {\n      userSelectionFilters,\n      resultsAggregations,\n      overridableId,\n    } = this.props;\n    const selectedFilters = this._getSelectedFilters(userSelectionFilters);\n    const resultBuckets = this._getResultBuckets(resultsAggregations);\n    const valuesCmp = resultBuckets.length\n      ? this._renderValues(resultBuckets, selectedFilters)\n      : null;\n    return (\n      <Element\n        title={this.title}\n        containerCmp={valuesCmp}\n        overridableId={overridableId}\n      />\n    );\n  }\n}\n\nBucketAggregation.propTypes = {\n  title: PropTypes.string.isRequired,\n  agg: PropTypes.shape({\n    field: PropTypes.string.isRequired,\n    aggName: PropTypes.string.isRequired,\n    childAgg: PropTypes.object,\n  }),\n  userSelectionFilters: PropTypes.array.isRequired,\n  resultsAggregations: PropTypes.object.isRequired,\n  updateQueryFilters: PropTypes.func.isRequired,\n  renderValuesContainerElement: PropTypes.func,\n  renderValueElement: PropTypes.func,\n  overridableId: PropTypes.string,\n};\n\nBucketAggregation.defaultProps = {\n  renderValuesContainerElement: null,\n  renderValueElement: null,\n  overridableId: '',\n};\n\nconst Element = ({ overridableId, ...props }) => {\n  const { title, containerCmp } = props;\n  return (\n    containerCmp && (\n      <Overridable\n        id={buildUID('BucketAggregation.element', overridableId)}\n        {...props}\n      >\n        <Card>\n          <Card.Content>\n            <Card.Header>{title}</Card.Header>\n          </Card.Content>\n          <Card.Content>{containerCmp}</Card.Content>\n        </Card>\n      </Overridable>\n    )\n  );\n};\n\nexport default Overridable.component('BucketAggregation', BucketAggregation);\n","/*\n * This file is part of React-SearchKit.\n * Copyright (C) 2019 CERN.\n *\n * React-SearchKit is free software; you can redistribute it and/or modify it\n * under the terms of the MIT License; see LICENSE file for more details.\n */\n\nimport { connect } from '../../store';\nimport { updateQueryFilters } from '../../state/actions';\nimport BucketAggregationComponent from './BucketAggregation';\n\nconst mapDispatchToProps = dispatch => ({\n  updateQueryFilters: filter => dispatch(updateQueryFilters(filter)),\n});\n\nexport const BucketAggregation = connect(\n  state => ({\n    userSelectionFilters: state.query.filters,\n    resultsAggregations: state.results.data.aggregations,\n  }),\n  mapDispatchToProps\n)(BucketAggregationComponent);\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","/*\n * This file is part of React-SearchKit.\n * Copyright (C) 2019 CERN.\n *\n * React-SearchKit is free software; you can redistribute it and/or modify it\n * under the terms of the MIT License; see LICENSE file for more details.\n */\n\nimport _ from 'lodash';\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Input } from 'semantic-ui-react';\nimport Overridable from 'react-overridable';\nimport './AutocompleteSearchBar.scss';\nimport { buildUID } from '../../util';\n\nclass AutocompleteSearchBar extends Component {\n  constructor(props) {\n    super(props);\n    this.updateQueryString = this.props.updateQueryString;\n    this.updateSuggestions = this.props.debounce\n      ? _.debounce(this.props.updateSuggestions, this.props.debounceTime, {\n          leading: true,\n        })\n      : this.props.updateSuggestions;\n    this.clearSuggestions = this.props.clearSuggestions;\n    this.minCharsToAutocomplete = this.props.minCharsToAutocomplete;\n    this.state = {\n      currentValue: this.props.queryString || '',\n    };\n    this.handleAutocompleteChange =\n      props.handleAutocompleteChange || this._handleAutocompleteChange;\n  }\n\n  _handleAutocompleteChange = (suggestionString) => {\n    if (suggestionString.length >= this.minCharsToAutocomplete) {\n      this.updateSuggestions(suggestionString);\n    }\n  };\n\n  onInputChange = async (queryString) => {\n    await this.setState({\n      currentValue: queryString,\n    });\n\n    this.handleAutocompleteChange(this.state.currentValue);\n  };\n\n  executeSearch = () => {\n    this.updateQueryString(this.state.currentValue);\n  };\n\n  render() {\n    const { placeholder, suggestions, overridableId } = this.props;\n    return (\n      <Element\n        placeholder={placeholder}\n        queryString={this.state.currentValue}\n        querySuggestions={suggestions}\n        onInputChange={this.onInputChange}\n        executeSearch={this.executeSearch}\n        overridableId={overridableId}\n      />\n    );\n  }\n}\n\nAutocompleteSearchBar.propTypes = {\n  queryString: PropTypes.string,\n  updateQueryString: PropTypes.func.isRequired,\n  updateSuggestions: PropTypes.func.isRequired,\n  clearSuggestions: PropTypes.func.isRequired,\n  handleAutocompleteChange: PropTypes.func,\n  debounce: PropTypes.bool,\n  debounceTime: PropTypes.number,\n  placeholder: PropTypes.string,\n  minCharsToAutocomplete: PropTypes.number,\n  overridableId: PropTypes.string,\n};\n\nAutocompleteSearchBar.defaultProps = {\n  handleAutocompleteChange: null,\n  placeholder: 'Type something',\n  minCharsToAutocomplete: 3,\n  overridableId: '',\n};\n\nconst AutocompleteSearchBarUncontrolled = (props) => (\n  <AutocompleteSearchBar key={props.queryString} {...props} />\n);\n\nconst Element = ({ overridableId, ...props }) => {\n  const {\n    placeholder,\n    queryString,\n    querySuggestions,\n    onInputChange,\n    executeSearch,\n  } = props;\n  const onBtnSearchClick = (event, input) => {\n    executeSearch();\n  };\n  const onKeyPress = (event, input) => {\n    if (event.key === 'Enter') {\n      executeSearch();\n    }\n  };\n\n  return (\n    <Overridable\n      id={buildUID('AutocompleteSearchBar.element', overridableId)}\n      {...props}\n    >\n      <div className=\"AutoCompleteText\">\n        <Input\n          action={{\n            content: 'Search',\n            onClick: onBtnSearchClick,\n          }}\n          fluid\n          placeholder={placeholder}\n          onChange={(event, { value }) => {\n            onInputChange(value);\n          }}\n          value={queryString}\n          onKeyPress={onKeyPress}\n        />\n        <Suggestions\n          querySuggestions={querySuggestions}\n          overridableId={overridableId}\n        />\n      </div>\n    </Overridable>\n  );\n};\n\nconst Suggestions = ({ overridableId, ...props }) => {\n  const { querySuggestions } = props;\n  const onSuggestionSelected = async (suggestion) => {\n    await this.setState({\n      currentValue: suggestion,\n    });\n    this.clearSuggestions();\n    this.executeSearch();\n  };\n\n  if (querySuggestions.length === 0) {\n    return null;\n  }\n\n  return (\n    <Overridable\n      id={buildUID('AutocompleteSearchBar.suggestions', overridableId)}\n      {...props}\n    >\n      <ul>\n        {querySuggestions.map((text) => (\n          <li onClick={() => onSuggestionSelected(text)} key={text}>\n            {text}\n          </li>\n        ))}\n      </ul>\n    </Overridable>\n  );\n};\n\nexport default Overridable.component(\n  'AutocompleteSearchBar',\n  AutocompleteSearchBarUncontrolled\n);\n","/*\n * This file is part of React-SearchKit.\n * Copyright (C) 2019 CERN.\n *\n * React-SearchKit is free software; you can redistribute it and/or modify it\n * under the terms of the MIT License; see LICENSE file for more details.\n */\n\nimport { connect } from '../../store';\nimport {\n  updateQueryString,\n  updateSuggestions,\n  clearSuggestions,\n} from '../../state/actions';\nimport AutocompleteSearchBarComponent from '../AutocompleteSearchBar/AutocompleteSearchBar';\n\nconst mapDispatchToProps = dispatch => ({\n  updateQueryString: query => dispatch(updateQueryString(query)),\n  updateSuggestions: query => dispatch(updateSuggestions(query)),\n  clearSuggestions: () => dispatch(clearSuggestions()),\n});\n\nconst mapStateToProps = state => ({\n  queryString: state.query.queryString,\n  suggestions: state.query.suggestions,\n});\n\nexport const AutocompleteSearchBar = connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(AutocompleteSearchBarComponent);\n","/*\n * This file is part of React-SearchKit.\n * Copyright (C) 2018 CERN.\n *\n * React-SearchKit is free software; you can redistribute it and/or modify it\n * under the terms of the MIT License; see LICENSE file for more details.\n */\n\nimport { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Overridable from 'react-overridable';\nclass ShouldRender extends Component {\n  render() {\n    const { condition } = this.props;\n    return condition ? this.props.children : null;\n  }\n}\n\nShouldRender.propTypes = {\n  condition: PropTypes.bool,\n};\n\nShouldRender.defaultProps = {\n  condition: true,\n};\n\nexport default Overridable.component('ShouldRender', ShouldRender);\n","/*\n * This file is part of React-SearchKit.\n * Copyright (C) 2018 CERN.\n *\n * React-SearchKit is free software; you can redistribute it and/or modify it\n * under the terms of the MIT License; see LICENSE file for more details.\n */\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Label } from 'semantic-ui-react';\nimport Overridable from 'react-overridable';\nimport { ShouldRender } from '../ShouldRender';\nimport { buildUID } from '../../util';\n\nclass Count extends Component {\n  render() {\n    const { loading, totalResults, label, overridableId } = this.props;\n    return (\n      <ShouldRender condition={!loading && totalResults > 0}>\n        {label(\n          <Element totalResults={totalResults} overridableId={overridableId} />\n        )}\n      </ShouldRender>\n    );\n  }\n}\n\nCount.propTypes = {\n  loading: PropTypes.bool.isRequired,\n  totalResults: PropTypes.number.isRequired,\n  label: PropTypes.func,\n  overridableId: PropTypes.string,\n};\n\nCount.defaultProps = {\n  label: (cmp) => cmp,\n  overridableId: '',\n};\n\nconst Element = ({ totalResults, overridableId }) => (\n  <Overridable\n    id={buildUID('Count.element', overridableId)}\n    totalResults={totalResults}\n  >\n    <Label color={'blue'}>{totalResults}</Label>\n  </Overridable>\n);\n\nexport default Overridable.component('Count', Count);\n","/*\n * This file is part of React-SearchKit.\n * Copyright (C) 2018 CERN.\n *\n * React-SearchKit is free software; you can redistribute it and/or modify it\n * under the terms of the MIT License; see LICENSE file for more details.\n */\n\nimport { connect } from '../../store';\nimport CountComponent from './Count';\n\nexport const Count = connect(state => ({\n  loading: state.results.loading,\n  totalResults: state.results.data.total,\n}))(CountComponent);\n","/*\n * This file is part of React-SearchKit.\n * Copyright (C) 2018 CERN.\n *\n * React-SearchKit is free software; you can redistribute it and/or modify it\n * under the terms of the MIT License; see LICENSE file for more details.\n */\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Segment, Header, Icon, Button } from 'semantic-ui-react';\nimport _isEmpty from 'lodash/isEmpty';\nimport Overridable from 'react-overridable';\nimport { ShouldRender } from '../ShouldRender';\nimport { buildUID } from '../../util';\n\nclass EmptyResults extends Component {\n  constructor(props) {\n    super(props);\n    this.resetQuery = props.resetQuery;\n  }\n\n  render() {\n    const {\n      loading,\n      totalResults,\n      error,\n      queryString,\n      overridableId,\n    } = this.props;\n    return (\n      <ShouldRender\n        condition={!loading && _isEmpty(error) && totalResults === 0}\n      >\n        <Element\n          queryString={queryString}\n          resetQuery={this.resetQuery}\n          overridableId={overridableId}\n        />\n      </ShouldRender>\n    );\n  }\n}\n\nEmptyResults.propTypes = {\n  loading: PropTypes.bool.isRequired,\n  totalResults: PropTypes.number.isRequired,\n  error: PropTypes.object.isRequired,\n  queryString: PropTypes.string,\n  resetQuery: PropTypes.func.isRequired,\n  overridableId: PropTypes.string,\n};\n\nEmptyResults.defaultProps = {\n  queryString: '',\n  overridableId: '',\n};\n\nconst Element = ({ overridableId, ...props }) => {\n  const { queryString, resetQuery } = props;\n  return (\n    <Overridable\n      id={buildUID('EmptyResults.element', overridableId)}\n      {...props}\n    >\n      <Segment placeholder textAlign=\"center\">\n        <Header icon>\n          <Icon name=\"search\" />\n          No results found!\n        </Header>\n        {queryString && <em>Current search \"{queryString}\"</em>}\n        <br />\n        <Button primary onClick={() => resetQuery()}>\n          Clear query\n        </Button>\n      </Segment>\n    </Overridable>\n  );\n};\n\nexport default Overridable.component('EmptyResults', EmptyResults);\n","/*\n * This file is part of React-SearchKit.\n * Copyright (C) 2018 CERN.\n *\n * React-SearchKit is free software; you can redistribute it and/or modify it\n * under the terms of the MIT License; see LICENSE file for more details.\n */\n\nimport { connect } from '../../store';\nimport { resetQuery } from '../../state/actions';\nimport EmptyResultsComponent from './EmptyResults';\n\nconst mapDispatchToProps = dispatch => ({\n  resetQuery: () => dispatch(resetQuery()),\n});\nexport const EmptyResults = connect(\n  state => ({\n    loading: state.results.loading,\n    totalResults: state.results.data.total,\n    error: state.results.error,\n    queryString: state.query.queryString,\n  }),\n  mapDispatchToProps\n)(EmptyResultsComponent);\n","/*\n * This file is part of React-SearchKit.\n * Copyright (C) 2018 CERN.\n *\n * React-SearchKit is free software; you can redistribute it and/or modify it\n * under the terms of the MIT License; see LICENSE file for more details.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport _isEmpty from 'lodash/isEmpty';\nimport Overridable from 'react-overridable';\nimport { ShouldRender } from '../ShouldRender';\nimport { buildUID } from '../../util';\n\nfunction Error({ loading, error, overridableId }) {\n  return (\n    <ShouldRender condition={!loading && !_isEmpty(error)}>\n      <Element error={error} overridableId={overridableId} />\n    </ShouldRender>\n  );\n}\n\nError.propTypes = {\n  loading: PropTypes.bool.isRequired,\n  error: PropTypes.object.isRequired,\n  overridableId: PropTypes.string,\n};\n\nError.defaultProps = {\n  overridableId: '',\n};\n\nconst Element = ({ error, overridableId }) => {\n  return (\n    <Overridable id={buildUID('Error.element', overridableId)} error={error}>\n      <div>Oups! Something went wrong while fetching results.</div>\n    </Overridable>\n  );\n};\n\nexport default Overridable.component('Error', Error);\n","/*\n * This file is part of React-SearchKit.\n * Copyright (C) 2018 CERN.\n *\n * React-SearchKit is free software; you can redistribute it and/or modify it\n * under the terms of the MIT License; see LICENSE file for more details.\n */\n\nimport { connect } from '../../store';\nimport ErrorComponent from './Error';\n\nexport const Error = connect(state => ({\n  loading: state.results.loading,\n  error: state.results.error,\n}))(ErrorComponent);\n","/*\n * This file is part of React-SearchKit.\n * Copyright (C) 2018 CERN.\n *\n * React-SearchKit is free software; you can redistribute it and/or modify it\n * under the terms of the MIT License; see LICENSE file for more details.\n */\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Menu, Icon } from 'semantic-ui-react';\nimport Overridable from 'react-overridable';\nimport { ShouldRender } from '../ShouldRender';\nimport { buildUID } from '../../util';\n\nclass LayoutSwitcher extends Component {\n  constructor(props) {\n    super(props);\n    this.defaultValue = this.props.defaultLayout;\n    this.updateLayout = props.updateLayout;\n    this.setInitialState = props.setInitialState;\n  }\n\n  componentDidMount() {\n    if (this.props.currentLayout === null) {\n      this.setInitialState({\n        layout: this.defaultValue,\n      });\n    }\n  }\n\n  onLayoutChange = (layoutName) => {\n    this.updateLayout(layoutName);\n  };\n\n  render() {\n    const { currentLayout, loading, totalResults, overridableId } = this.props;\n    return (\n      <ShouldRender\n        condition={currentLayout !== null && !loading && totalResults > 0}\n      >\n        <Element\n          currentLayout={currentLayout}\n          onLayoutChange={this.onLayoutChange}\n          overridableId={overridableId}\n        />\n      </ShouldRender>\n    );\n  }\n}\n\nLayoutSwitcher.propTypes = {\n  defaultLayout: PropTypes.oneOf(['list', 'grid']),\n  updateLayout: PropTypes.func.isRequired,\n  setInitialState: PropTypes.func.isRequired,\n  loading: PropTypes.bool.isRequired,\n  currentLayout: PropTypes.string,\n  totalResults: PropTypes.number.isRequired,\n  overridableId: PropTypes.string,\n};\n\nLayoutSwitcher.defaultProps = {\n  defaultLayout: 'list',\n  currentLayout: null,\n  overridableId: '',\n};\n\nconst Element = ({ overridableId, ...props }) => {\n  const { currentLayout, onLayoutChange } = props;\n  const clickHandler = (event, { name }) => {\n    onLayoutChange(name);\n  };\n  return (\n    <Overridable\n      id={buildUID('LayoutSwitcher.element', overridableId)}\n      {...props}\n    >\n      <Menu compact icon>\n        <Menu.Item\n          name=\"list\"\n          active={currentLayout === 'list'}\n          onClick={clickHandler}\n        >\n          <Icon name=\"list layout\" />\n        </Menu.Item>\n        <Menu.Item\n          name=\"grid\"\n          active={currentLayout === 'grid'}\n          onClick={clickHandler}\n        >\n          <Icon name=\"grid layout\" />\n        </Menu.Item>\n      </Menu>\n    </Overridable>\n  );\n};\n\nexport default Overridable.component('LayoutSwitcher', LayoutSwitcher);\n","/*\n * This file is part of React-SearchKit.\n * Copyright (C) 2018 CERN.\n *\n * React-SearchKit is free software; you can redistribute it and/or modify it\n * under the terms of the MIT License; see LICENSE file for more details.\n */\n\nimport { connect } from '../../store';\nimport { updateResultsLayout, setInitialState } from '../../state/actions';\nimport LayoutSwitcherComponent from './LayoutSwitcher';\n\nconst mapDispatchToProps = dispatch => ({\n  updateLayout: layout => dispatch(updateResultsLayout(layout)),\n  setInitialState: initialState => dispatch(setInitialState(initialState)),\n});\nexport const LayoutSwitcher = connect(\n  state => ({\n    loading: state.results.loading,\n    currentLayout: state.query.layout,\n    totalResults: state.results.data.total,\n  }),\n  mapDispatchToProps\n)(LayoutSwitcherComponent);\n","/*\n * This file is part of React-SearchKit.\n * Copyright (C) 2018 CERN.\n *\n * React-SearchKit is free software; you can redistribute it and/or modify it\n * under the terms of the MIT License; see LICENSE file for more details.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { Loader } from 'semantic-ui-react';\nimport Overridable from 'react-overridable';\nimport { buildUID } from '../../util';\n\nfunction ResultsLoader({ children, loading, overridableId }) {\n  return loading ? <Element overridableId={overridableId} /> : children;\n}\n\nResultsLoader.propTypes = {\n  loading: PropTypes.bool.isRequired,\n  overridableId: PropTypes.string,\n};\n\nResultsLoader.defaultProps = {\n  overridableId: '',\n};\n\nconst Element = ({ overridableId }) => (\n  <Overridable id={buildUID('ResultsLoader.element', overridableId)}>\n    <Loader active size=\"huge\" inline=\"centered\" />\n  </Overridable>\n);\n\nexport default Overridable.component('ResultsLoader', ResultsLoader);\n","/*\n * This file is part of React-SearchKit.\n * Copyright (C) 2018 CERN.\n *\n * React-SearchKit is free software; you can redistribute it and/or modify it\n * under the terms of the MIT License; see LICENSE file for more details.\n */\n\nimport { connect } from '../../store';\nimport ResultsLoaderComponent from './ResultsLoader';\n\nexport const ResultsLoader = connect(state => ({\n  loading: state.results.loading,\n}))(ResultsLoaderComponent);\n","/*\n * This file is part of React-SearchKit.\n * Copyright (C) 2018 CERN.\n *\n * React-SearchKit is free software; you can redistribute it and/or modify it\n * under the terms of the MIT License; see LICENSE file for more details.\n */\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Pagination as Paginator } from 'semantic-ui-react';\nimport Overridable from 'react-overridable';\nimport { ShouldRender } from '../ShouldRender';\nimport { buildUID } from '../../util';\n\nclass Pagination extends Component {\n  constructor(props) {\n    super(props);\n    this.defaultValue = props.defaultValue;\n    this.updateQueryPage = props.updateQueryPage;\n    this.setInitialState = props.setInitialState;\n  }\n\n  componentDidMount() {\n    if (this.props.currentPage === -1) {\n      this.setInitialState({\n        page: this.defaultValue,\n      });\n    }\n  }\n\n  onPageChange = (activePage) => {\n    if (activePage === this.props.currentPage) return;\n    this.updateQueryPage(activePage);\n  };\n\n  render() {\n    const {\n      loading,\n      totalResults,\n      currentPage,\n      currentSize,\n      options,\n      overridableId,\n    } = this.props;\n    return (\n      <ShouldRender\n        condition={\n          !loading && currentPage > -1 && currentSize > -1 && totalResults > 0\n        }\n      >\n        <Element\n          currentPage={currentPage}\n          currentSize={currentSize}\n          totalResults={totalResults}\n          onPageChange={this.onPageChange}\n          options={options}\n          overridableId={overridableId}\n        />\n      </ShouldRender>\n    );\n  }\n}\n\nPagination.propTypes = {\n  currentPage: PropTypes.number.isRequired,\n  currentSize: PropTypes.number.isRequired,\n  loading: PropTypes.bool.isRequired,\n  totalResults: PropTypes.number.isRequired,\n  options: PropTypes.PropTypes.shape({\n    boundaryRangeCount: PropTypes.number,\n    siblingRangeCount: PropTypes.number,\n    showEllipsis: PropTypes.bool,\n    showFirst: PropTypes.bool,\n    showLast: PropTypes.bool,\n    showPrev: PropTypes.bool,\n    showNext: PropTypes.bool,\n  }),\n  defaultValue: PropTypes.number,\n  overridableId: PropTypes.string,\n};\n\nPagination.defaultProps = {\n  options: {\n    boundaryRangeCount: 1,\n    siblingRangeCount: 1,\n    showEllipsis: true,\n    showFirst: true,\n    showLast: true,\n    showPrev: true,\n    showNext: true,\n  },\n  defaultValue: 10,\n  overridableId: '',\n};\n\nconst Element = ({ overridableId, ...props }) => {\n  const {\n    currentPage,\n    currentSize,\n    totalResults,\n    onPageChange,\n    options,\n    ...extraParams\n  } = props;\n  const pages = Math.ceil(totalResults / currentSize);\n  const boundaryRangeCount = options.boundaryRangeCount;\n  const siblingRangeCount = options.siblingRangeCount;\n  const showEllipsis = options.showEllipsis;\n  const showFirst = options.showFirst;\n  const showLast = options.showLast;\n  const showPrev = options.showPrev;\n  const showNext = options.showNext;\n  const _onPageChange = (event, { activePage }) => {\n    onPageChange(activePage);\n  };\n\n  return (\n    <Overridable id={buildUID('Pagination.element', overridableId)} {...props}>\n      <Paginator\n        activePage={currentPage}\n        totalPages={pages}\n        onPageChange={_onPageChange}\n        boundaryRange={boundaryRangeCount}\n        siblingRange={siblingRangeCount}\n        ellipsisItem={showEllipsis ? undefined : null}\n        firstItem={showFirst ? undefined : null}\n        lastItem={showLast ? undefined : null}\n        prevItem={showPrev ? undefined : null}\n        nextItem={showNext ? undefined : null}\n        {...extraParams}\n      />\n    </Overridable>\n  );\n};\n\nexport default Overridable.component('Pagination', Pagination);\n","/*\n * This file is part of React-SearchKit.\n * Copyright (C) 2018 CERN.\n *\n * React-SearchKit is free software; you can redistribute it and/or modify it\n * under the terms of the MIT License; see LICENSE file for more details.\n */\n\nimport { connect } from '../../store';\nimport {\n  updateQueryPaginationPage,\n  setInitialState,\n} from '../../state/actions';\nimport PaginationComponent from './Pagination';\n\nconst mapDispatchToProps = dispatch => ({\n  updateQueryPage: page => dispatch(updateQueryPaginationPage(page)),\n  setInitialState: value => dispatch(setInitialState(value)),\n});\n\nexport const Pagination = connect(\n  state => ({\n    currentPage: state.query.page,\n    currentSize: state.query.size,\n    loading: state.results.loading,\n    totalResults: state.results.data.total,\n  }),\n  mapDispatchToProps\n)(PaginationComponent);\n","/*\n * This file is part of React-SearchKit.\n * Copyright (C) 2018-2019 CERN.\n *\n * React-SearchKit is free software; you can redistribute it and/or modify it\n * under the terms of the MIT License; see LICENSE file for more details.\n */\n\nimport React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport Overridable from 'react-overridable';\n\nclass Bootstrap extends Component {\n  constructor(props) {\n    super(props);\n    this.appName = props.appName;\n    this.searchOnInit = props.searchOnInit;\n    this.eventListenerEnabled = props.eventListenerEnabled;\n    this.onAppInitialized = props.onAppInitialized;\n    this.searchOnUrlQueryStringChanged = props.searchOnUrlQueryStringChanged;\n  }\n\n  updateQueryState = (query) => this.props.updateQueryState(query);\n\n  onQueryChanged = ({ detail: payload }) => {\n    const appReceiverName = payload.appName || this.appName;\n    if (appReceiverName === this.appName) {\n      this.updateQueryState(payload.searchQuery);\n    } else {\n      console.debug(\n        `RSK app ${this.appName}: ignore event sent for app ${appReceiverName}...`\n      );\n    }\n  };\n\n  componentDidMount() {\n    if (this.eventListenerEnabled) {\n      window.addEventListener('queryChanged', this.onQueryChanged);\n    }\n\n    window.onpopstate = () => {\n      this.searchOnUrlQueryStringChanged();\n    };\n\n    this.onAppInitialized(this.searchOnInit);\n  }\n\n  render() {\n    return <Fragment>{this.props.children}</Fragment>;\n  }\n\n  componentWillUnmount() {\n    this.historyUnlisten && this.historyUnlisten();\n    window.onpopstate = () => {};\n    window.removeEventListener('queryChanged', this.onQueryChanged);\n  }\n}\n\nBootstrap.propTypes = {\n  searchOnInit: PropTypes.bool,\n  eventListenerEnabled: PropTypes.bool,\n  appName: PropTypes.string,\n};\n\nBootstrap.defaultProps = {\n  searchOnInit: true,\n};\n\nexport default Overridable.component('Bootstrap', Bootstrap);\n","/*\n * This file is part of React-SearchKit.\n * Copyright (C) 2018-2019 CERN.\n *\n * React-SearchKit is free software; you can redistribute it and/or modify it\n * under the terms of the MIT License; see LICENSE file for more details.\n */\n\nimport { connect } from '../../store';\nimport {\n  onAppInitialized as _onAppInitialized,\n  executeQuery,\n  updateQueryState,\n} from '../../state/actions';\nimport BootstrapComponent from './Bootstrap';\n\nconst mapDispatchToProps = dispatch => ({\n  onAppInitialized: searchOnInit => dispatch(_onAppInitialized(searchOnInit)),\n  updateQueryState: queryState => dispatch(updateQueryState(queryState)),\n  searchOnUrlQueryStringChanged: () =>\n    dispatch(executeQuery({ shouldUpdateUrlQueryString: false })),\n});\n\nexport const Bootstrap = connect(null, mapDispatchToProps)(BootstrapComponent);\n","/*\n * This file is part of React-SearchKit.\n * Copyright (C) 2018-2019 CERN.\n *\n * React-SearchKit is free software; you can redistribute it and/or modify it\n * under the terms of the MIT License; see LICENSE file for more details.\n */\n\nimport React, { Component } from 'react';\nimport { Provider } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport Overridable from 'react-overridable';\nimport { configureStore } from '../../store';\nimport { UrlHandlerApi } from '../../api';\nimport { Bootstrap } from '../Bootstrap';\nimport { buildUID } from '../../util';\n\nexport class ReactSearchKit extends Component {\n  constructor(props) {\n    super(props);\n    const appConfig = {\n      searchApi: props.searchApi,\n      suggestionApi: props.suggestionApi,\n      urlHandlerApi: props.urlHandlerApi.enabled\n        ? props.urlHandlerApi.customHandler ||\n          new UrlHandlerApi(props.urlHandlerApi.overrideConfig)\n        : null,\n      defaultSortByOnEmptyQuery: props.defaultSortByOnEmptyQuery,\n      searchOnInit: props.searchOnInit,\n    };\n    this.store = configureStore(appConfig);\n    this.appName = props.appName;\n    this.eventListenerEnabled = props.eventListenerEnabled;\n  }\n\n  render() {\n    const { searchOnInit, overridableId } = this.props;\n\n    return (\n      <Provider store={this.store}>\n        <Bootstrap\n          searchOnInit={searchOnInit}\n          appName={this.appName}\n          eventListenerEnabled={this.eventListenerEnabled}\n        >\n          <Overridable id={buildUID('ReactSearchKit.children', overridableId)}>\n            {this.props.children}\n          </Overridable>\n        </Bootstrap>\n      </Provider>\n    );\n  }\n}\n\nReactSearchKit.propTypes = {\n  searchApi: PropTypes.object.isRequired,\n  suggestionApi: PropTypes.object,\n  urlHandlerApi: PropTypes.shape({\n    enabled: PropTypes.bool.isRequired,\n    overrideConfig: PropTypes.shape({\n      keepHistory: PropTypes.bool,\n      urlFilterSeparator: PropTypes.string,\n      urlParamsMapping: PropTypes.object,\n      urlParamValidator: PropTypes.object,\n      urlParser: PropTypes.object,\n    }),\n    customHandler: PropTypes.object,\n  }),\n  searchOnInit: PropTypes.bool,\n  defaultSortByOnEmptyQuery: PropTypes.string,\n  appName: PropTypes.string,\n  eventListenerEnabled: PropTypes.bool,\n  overridableId: PropTypes.string,\n};\n\nReactSearchKit.defaultProps = {\n  suggestionApi: null,\n  urlHandlerApi: {\n    enabled: true,\n    overrideConfig: {},\n    customHandler: null,\n  },\n  searchOnInit: true,\n  defaultSortByOnEmptyQuery: null,\n  appName: 'RSK',\n  eventListenerEnabled: false,\n  overridableId: '',\n};\n\nexport default Overridable.component('ReactSearchKit', ReactSearchKit);\n","/*\n * This file is part of React-SearchKit.\n * Copyright (C) 2018 CERN.\n *\n * React-SearchKit is free software; you can redistribute it and/or modify it\n * under the terms of the MIT License; see LICENSE file for more details.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { Card, Image } from 'semantic-ui-react';\nimport Overridable from 'react-overridable';\nimport { ShouldRender } from '../ShouldRender';\nimport { buildUID } from '../../util';\n\nfunction ResultsGrid({\n  loading,\n  totalResults,\n  results,\n  resultsPerRow,\n  overridableId,\n}) {\n  return (\n    <ShouldRender condition={!loading && totalResults > 0}>\n      <Element\n        results={results}\n        resultsPerRow={resultsPerRow}\n        overridableId={overridableId}\n      />\n    </ShouldRender>\n  );\n}\n\nResultsGrid.propTypes = {\n  loading: PropTypes.bool.isRequired,\n  totalResults: PropTypes.number.isRequired,\n  results: PropTypes.array.isRequired,\n  resultsPerRow: PropTypes.number,\n  overridableId: PropTypes.string,\n};\n\nResultsGrid.defaultProps = {\n  resultsPerRow: 3,\n  overridableId: '',\n};\n\nconst GridItem = ({ result, index, overridableId }) => (\n  <Overridable\n    id={buildUID('ResultsGrid.item', overridableId)}\n    result={result}\n    index={index}\n  >\n    <Card fluid key={index} href={`#${result.id}`}>\n      <Image src={result.imgSrc || 'http://placehold.it/200'} />\n      <Card.Content>\n        <Card.Header>{result.title}</Card.Header>\n        <Card.Description>{result.description}</Card.Description>\n      </Card.Content>\n    </Card>\n  </Overridable>\n);\n\nconst Element = ({ overridableId, ...props }) => {\n  const { results, resultsPerRow } = props;\n  const _results = results.map((result, index) => (\n    <GridItem\n      key={index}\n      result={result}\n      index={index}\n      overridableId={overridableId}\n    />\n  ));\n\n  return (\n    <Overridable\n      id={buildUID('ResultsGrid.container', overridableId)}\n      {...props}\n    >\n      <Card.Group itemsPerRow={resultsPerRow}>{_results}</Card.Group>\n    </Overridable>\n  );\n};\n\nexport default Overridable.component('ResultsGrid', ResultsGrid);\n","/*\n * This file is part of React-SearchKit.\n * Copyright (C) 2018 CERN.\n *\n * React-SearchKit is free software; you can redistribute it and/or modify it\n * under the terms of the MIT License; see LICENSE file for more details.\n */\n\nimport { connect } from '../../store';\nimport ResultsGridComponent from './ResultsGrid';\n\nexport const ResultsGrid = connect(state => ({\n  loading: state.results.loading,\n  totalResults: state.results.data.total,\n  results: state.results.data.hits,\n}))(ResultsGridComponent);\n","/*\n * This file is part of React-SearchKit.\n * Copyright (C) 2018 CERN.\n *\n * React-SearchKit is free software; you can redistribute it and/or modify it\n * under the terms of the MIT License; see LICENSE file for more details.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { Item } from 'semantic-ui-react';\nimport Overridable from 'react-overridable';\nimport { ShouldRender } from '../ShouldRender';\nimport { buildUID } from '../../util';\n\nfunction ResultsList({ loading, totalResults, results, overridableId }) {\n  return (\n    <ShouldRender condition={!loading && totalResults > 0}>\n      <Element results={results} overridableId={overridableId} />\n    </ShouldRender>\n  );\n}\n\nResultsList.propTypes = {\n  loading: PropTypes.bool.isRequired,\n  totalResults: PropTypes.number.isRequired,\n  results: PropTypes.array.isRequired,\n  overridableId: PropTypes.string,\n};\n\nResultsList.defaultProps = {\n  overridableId: '',\n};\n\nconst ListItem = ({ result, index, overridableId }) => (\n  <Overridable\n    id={buildUID('ResultsList.item', overridableId)}\n    result={result}\n    index={index}\n  >\n    <Item key={index} href={`#${result.id}`}>\n      <Item.Image\n        size=\"small\"\n        src={result.imgSrc || 'http://placehold.it/200'}\n      />\n      <Item.Content>\n        <Item.Header>{result.title}</Item.Header>\n        <Item.Description>{result.description}</Item.Description>\n      </Item.Content>\n    </Item>\n  </Overridable>\n);\n\nconst Element = ({ results, overridableId }) => {\n  const _results = results.map((result, index) => (\n    <ListItem\n      result={result}\n      index={index}\n      key={index}\n      overridableId={overridableId}\n    />\n  ));\n\n  return (\n    <Overridable\n      id={buildUID('ResultsList.container', overridableId)}\n      results={_results}\n    >\n      <Item.Group divided relaxed link>\n        {_results}\n      </Item.Group>\n    </Overridable>\n  );\n};\n\nexport default Overridable.component('ResultsList', ResultsList);\n","/*\n * This file is part of React-SearchKit.\n * Copyright (C) 2018 CERN.\n *\n * React-SearchKit is free software; you can redistribute it and/or modify it\n * under the terms of the MIT License; see LICENSE file for more details.\n */\n\nimport { connect } from '../../store';\nimport ResultsListComponent from './ResultsList';\n\nexport const ResultsList = connect(state => ({\n  loading: state.results.loading,\n  totalResults: state.results.data.total,\n  results: state.results.data.hits,\n}))(ResultsListComponent);\n","/*\n * This file is part of React-SearchKit.\n * Copyright (C) 2018-2019 CERN.\n *\n * React-SearchKit is free software; you can redistribute it and/or modify it\n * under the terms of the MIT License; see LICENSE file for more details.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Overridable from 'react-overridable';\nimport { ResultsList } from '../ResultsList';\nimport { ResultsGrid } from '../ResultsGrid';\nimport { ShouldRender } from '../ShouldRender';\nimport { buildUID } from '../../util';\n\nfunction ResultsMultiLayout({\n  loading,\n  totalResults,\n  currentLayout,\n  overridableId,\n}) {\n  return (\n    <ShouldRender\n      condition={currentLayout != null && !loading && totalResults > 0}\n    >\n      <Element layout={currentLayout} overridableId={overridableId} />\n    </ShouldRender>\n  );\n}\n\nResultsMultiLayout.propTypes = {\n  totalResults: PropTypes.number.isRequired,\n  currentLayout: PropTypes.string,\n  overridableId: PropTypes.string,\n};\n\nResultsMultiLayout.defaultProps = {\n  currentLayout: null,\n  overridableId: '',\n};\n\nconst Element = ({ layout, overridableId }) => (\n  <Overridable\n    id={buildUID('ResultsMultiLayout.element', overridableId)}\n    layout={layout}\n    ResultsList={ResultsList}\n    ResultsGrid={ResultsGrid}\n  >\n    {layout === 'list' ? (\n      <ResultsList overridableId={overridableId} />\n    ) : (\n      <ResultsGrid overridableId={overridableId} />\n    )}\n  </Overridable>\n);\n\nexport default Overridable.component('ResultsMultiLayout', ResultsMultiLayout);\n","/*\n * This file is part of React-SearchKit.\n * Copyright (C) 2018 CERN.\n *\n * React-SearchKit is free software; you can redistribute it and/or modify it\n * under the terms of the MIT License; see LICENSE file for more details.\n */\n\nimport { connect } from '../../store';\nimport ResultsMultiLayoutComponent from './ResultsMultiLayout';\n\nexport const ResultsMultiLayout = connect(state => ({\n  loading: state.results.loading,\n  totalResults: state.results.data.total,\n  currentLayout: state.query.layout,\n}))(ResultsMultiLayoutComponent);\n","/*\n * This file is part of React-SearchKit.\n * Copyright (C) 2018 CERN.\n *\n * React-SearchKit is free software; you can redistribute it and/or modify it\n * under the terms of the MIT License; see LICENSE file for more details.\n */\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { ShouldRender } from '../ShouldRender';\nimport { buildUID } from '../../util';\nimport { Dropdown } from 'semantic-ui-react';\nimport Overridable from 'react-overridable';\n\nclass ResultsPerPage extends Component {\n  constructor(props) {\n    super(props);\n    this.options = props.values;\n    this.defaultValue = props.defaultValue;\n    this.updateQuerySize = this.props.updateQuerySize;\n    this.setInitialState = props.setInitialState;\n  }\n\n  componentDidMount() {\n    if (this.props.currentSize === -1) {\n      this.setInitialState({\n        size: this.defaultValue,\n      });\n    }\n  }\n\n  onChange = (value) => {\n    if (value === this.props.currentSize) return;\n    this.updateQuerySize(value);\n  };\n\n  render() {\n    const {\n      loading,\n      currentSize,\n      totalResults,\n      label,\n      overridableId,\n    } = this.props;\n    return (\n      <ShouldRender\n        condition={!loading && totalResults > 0 && currentSize !== -1}\n      >\n        {label(\n          <Element\n            currentSize={currentSize}\n            options={this.options}\n            onValueChange={this.onChange}\n            overridableId={overridableId}\n          />\n        )}\n      </ShouldRender>\n    );\n  }\n}\n\nResultsPerPage.propTypes = {\n  currentSize: PropTypes.number.isRequired,\n  loading: PropTypes.bool.isRequired,\n  totalResults: PropTypes.number.isRequired,\n  values: PropTypes.array.isRequired,\n  defaultValue: PropTypes.number,\n  updateQuerySize: PropTypes.func.isRequired,\n  setInitialState: PropTypes.func.isRequired,\n  label: PropTypes.func,\n  overridableId: PropTypes.string,\n};\n\nResultsPerPage.defaultProps = {\n  defaultValue: 10,\n  label: (cmp) => cmp,\n  overridableId: '',\n};\n\nconst Element = ({ overridableId, ...props }) => {\n  const { currentSize, options, onValueChange } = props;\n  const _options = options.map((element, index) => {\n    return { key: index, text: element.text, value: element.value };\n  });\n  return (\n    <Overridable\n      id={buildUID('ResultsPerPage.element', overridableId)}\n      {...props}\n    >\n      <Dropdown\n        inline\n        compact\n        options={_options}\n        value={currentSize}\n        onChange={(e, { value }) => onValueChange(value)}\n      />\n    </Overridable>\n  );\n};\n\nexport default Overridable.component('ResultsPerPage', ResultsPerPage);\n","/*\n * This file is part of React-SearchKit.\n * Copyright (C) 2018 CERN.\n *\n * React-SearchKit is free software; you can redistribute it and/or modify it\n * under the terms of the MIT License; see LICENSE file for more details.\n */\n\nimport { connect } from '../../store';\nimport {\n  updateQueryPaginationSize,\n  setInitialState,\n} from '../../state/actions';\nimport ResultsPerPageComponent from './ResultsPerPage';\n\nconst mapDispatchToProps = dispatch => ({\n  updateQuerySize: size => dispatch(updateQueryPaginationSize(size)),\n  setInitialState: value => dispatch(setInitialState(value)),\n});\n\nexport const ResultsPerPage = connect(\n  state => ({\n    loading: state.results.loading,\n    currentSize: state.query.size,\n    totalResults: state.results.data.total,\n  }),\n  mapDispatchToProps\n)(ResultsPerPageComponent);\n","/*\n * This file is part of React-SearchKit.\n * Copyright (C) 2018 CERN.\n *\n * React-SearchKit is free software; you can redistribute it and/or modify it\n * under the terms of the MIT License; see LICENSE file for more details.\n */\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Input } from 'semantic-ui-react';\nimport Overridable from 'react-overridable';\nimport { buildUID } from '../../util';\n\nclass SearchBar extends Component {\n  constructor(props) {\n    super(props);\n    this.updateQueryString = this.props.updateQueryString;\n    this.state = {\n      currentValue: this.props.queryString || '',\n    };\n  }\n\n  onInputChange = (queryString) => {\n    this.setState({\n      currentValue: queryString,\n    });\n  };\n\n  executeSearch = () => {\n    this.updateQueryString(this.state.currentValue);\n  };\n\n  render() {\n    const { placeholder, overridableId } = this.props;\n    return (\n      <Element\n        placeholder={placeholder}\n        queryString={this.state.currentValue}\n        onInputChange={this.onInputChange}\n        executeSearch={this.executeSearch}\n        overridableId={overridableId}\n      />\n    );\n  }\n}\n\nSearchBar.propTypes = {\n  placeholder: PropTypes.string,\n  queryString: PropTypes.string.isRequired,\n  updateQueryString: PropTypes.func.isRequired,\n  overridableId: PropTypes.string,\n};\n\nSearchBar.defaultProps = {\n  placeholder: '',\n  queryString: '',\n  overridableId: '',\n};\n\nconst SearchBarUncontrolled = (props) => (\n  <SearchBar key={props.queryString} {...props} />\n);\n\nconst Element = ({ overridableId, ...props }) => {\n  const {\n    placeholder: passedPlaceholder,\n    queryString,\n    onInputChange,\n    executeSearch,\n  } = props;\n  const placeholder = passedPlaceholder || 'Type something';\n  const onBtnSearchClick = (event, input) => {\n    executeSearch();\n  };\n  const onKeyPress = (event, input) => {\n    if (event.key === 'Enter') {\n      executeSearch();\n    }\n  };\n  return (\n    <Overridable id={buildUID('SearchBar.element', overridableId)} {...props}>\n      <Input\n        action={{\n          content: 'Search',\n          onClick: onBtnSearchClick,\n        }}\n        fluid\n        placeholder={placeholder}\n        onChange={(event, { value }) => {\n          onInputChange(value);\n        }}\n        value={queryString}\n        onKeyPress={onKeyPress}\n      />\n    </Overridable>\n  );\n};\n\nexport default Overridable.component('SearchBar', SearchBarUncontrolled);\n","/*\n * This file is part of React-SearchKit.\n * Copyright (C) 2018 CERN.\n *\n * React-SearchKit is free software; you can redistribute it and/or modify it\n * under the terms of the MIT License; see LICENSE file for more details.\n */\n\nimport { connect } from '../../store';\nimport { updateQueryString } from '../../state/actions';\nimport SearchBarComponent from './SearchBar';\n\nconst mapDispatchToProps = dispatch => ({\n  updateQueryString: query => dispatch(updateQueryString(query)),\n});\n\nexport const SearchBar = connect(\n  state => ({\n    queryString: state.query.queryString,\n  }),\n  mapDispatchToProps\n)(SearchBarComponent);\n","/*\n * This file is part of React-SearchKit.\n * Copyright (C) 2018-2019 CERN.\n *\n * React-SearchKit is free software; you can redistribute it and/or modify it\n * under the terms of the MIT License; see LICENSE file for more details.\n */\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Dropdown } from 'semantic-ui-react';\nimport Overridable from 'react-overridable';\nimport { ShouldRender } from '../ShouldRender';\nimport { buildUID } from '../../util';\n\nclass Sort extends Component {\n  constructor(props) {\n    super(props);\n    this.options = props.values;\n    this.updateQuerySorting = props.updateQuerySorting;\n    this.setInitialState = props.setInitialState;\n\n    this.options.forEach(\n      (option) =>\n        (option['value'] = this._computeValue(option.sortBy, option.sortOrder))\n    );\n\n    // compute default value for sort field and sort order\n    const defaultValue = this.options.find(\n      (option) => 'default' in option && option.default\n    );\n    this.defaultValue = {\n      sortBy: defaultValue.sortBy || this.options[0].sortBy,\n      sortOrder: defaultValue.sortOrder || this.options[0].sortOrder,\n    };\n\n    const defaultValueOnEmptyString = this.options.find(\n      (option) =>\n        'defaultOnEmptyString' in option && option.defaultOnEmptyString\n    );\n    this.defaultValueOnEmptyString = {\n      sortBy: defaultValueOnEmptyString\n        ? defaultValueOnEmptyString.sortBy\n        : this.options[0].sortBy,\n      sortOrder: defaultValueOnEmptyString\n        ? defaultValueOnEmptyString.sortOrder\n        : this.options[0].sortOrder,\n    };\n  }\n\n  componentDidMount() {\n    if (\n      this.props.currentSortBy === null &&\n      this.props.currentSortOrder === null\n    ) {\n      const defaultValue = this.props.currentQueryString\n        ? this.defaultValue\n        : this.defaultValueOnEmptyString;\n      this.setInitialState({\n        sortBy: defaultValue.sortBy,\n        sortOrder: defaultValue.sortOrder,\n      });\n    }\n  }\n\n  _computeValue = (sortBy, sortOrder) => {\n    return `${sortBy}-${sortOrder}`;\n  };\n\n  onChange = (value) => {\n    if (\n      value ===\n      this._computeValue(this.props.currentSortBy, this.props.currentSortOrder)\n    )\n      return;\n    const selected = this.options.find((option) => option.value === value);\n    this.updateQuerySorting(selected.sortBy, selected.sortOrder);\n  };\n\n  render() {\n    const {\n      currentSortBy,\n      currentSortOrder,\n      loading,\n      totalResults,\n      label,\n      overridableId,\n    } = this.props;\n    return (\n      <ShouldRender\n        condition={\n          currentSortBy !== null &&\n          currentSortOrder !== null &&\n          !loading &&\n          totalResults > 0\n        }\n      >\n        {label(\n          <Element\n            currentSortBy={currentSortBy}\n            currentSortOrder={currentSortOrder}\n            options={this.options}\n            onValueChange={this.onChange}\n            computeValue={this._computeValue}\n            overridableId={overridableId}\n          />\n        )}\n      </ShouldRender>\n    );\n  }\n}\n\nSort.propTypes = {\n  values: PropTypes.array.isRequired,\n  currentSortBy: PropTypes.string,\n  currentSortOrder: PropTypes.string,\n  loading: PropTypes.bool.isRequired,\n  totalResults: PropTypes.number.isRequired,\n  updateQuerySorting: PropTypes.func.isRequired,\n  setInitialState: PropTypes.func.isRequired,\n  label: PropTypes.func,\n  overridableId: PropTypes.string,\n};\n\nSort.defaultProps = {\n  currentSortBy: null,\n  currentSortOrder: null,\n  label: (cmp) => cmp,\n  overridableId: '',\n};\n\nconst Element = ({ overridableId, ...props }) => {\n  const {\n    currentSortBy,\n    currentSortOrder,\n    options,\n    onValueChange,\n    computeValue,\n  } = props;\n  const selected = computeValue(currentSortBy, currentSortOrder);\n  const _options = options.map((element, index) => {\n    return {\n      key: index,\n      text: element.text,\n      value: element.value,\n    };\n  });\n  return (\n    <Overridable id={buildUID('Sort.element', overridableId)} {...props}>\n      <Dropdown\n        selection\n        compact\n        options={_options}\n        value={selected}\n        onChange={(e, { value }) => onValueChange(value)}\n      />\n    </Overridable>\n  );\n};\n\nexport default Overridable.component('Sort', Sort);\n","/*\n * This file is part of React-SearchKit.\n * Copyright (C) 2018 CERN.\n *\n * React-SearchKit is free software; you can redistribute it and/or modify it\n * under the terms of the MIT License; see LICENSE file for more details.\n */\n\nimport { connect } from '../../store';\nimport { updateQuerySorting, setInitialState } from '../../state/actions';\nimport SortComponent from './Sort';\n\nconst mapDispatchToProps = dispatch => ({\n  updateQuerySorting: (sortBy, sortOrder) =>\n    dispatch(updateQuerySorting(sortBy, sortOrder)),\n  setInitialState: value => dispatch(setInitialState(value)),\n});\n\nexport const Sort = connect(\n  state => ({\n    currentQueryString: state.query.queryString,\n    currentSortBy: state.query.sortBy,\n    currentSortOrder: state.query.sortOrder,\n    loading: state.results.loading,\n    totalResults: state.results.data.total,\n  }),\n  mapDispatchToProps\n)(SortComponent);\n","/*\n * This file is part of React-SearchKit.\n * Copyright (C) 2018-2019 CERN.\n *\n * React-SearchKit is free software; you can redistribute it and/or modify it\n * under the terms of the MIT License; see LICENSE file for more details.\n */\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Dropdown } from 'semantic-ui-react';\nimport Overridable from 'react-overridable';\nimport { ShouldRender } from '../ShouldRender';\nimport { buildUID } from '../../util';\n\nclass SortBy extends Component {\n  constructor(props) {\n    super(props);\n    this.options = props.values;\n    this.defaultValue = this.props.defaultValue;\n    this.defaultValueOnEmptyString = this.props.defaultValueOnEmptyString;\n    this.updateQuerySortBy = props.updateQuerySortBy;\n    this.setInitialState = props.setInitialState;\n  }\n\n  componentDidMount() {\n    if (this.props.currentSortBy === null) {\n      const sortBy = this.props.currentQueryString\n        ? this.defaultValue\n        : this.defaultValueOnEmptyString || this.defaultValue;\n      this.setInitialState({\n        sortBy: sortBy,\n      });\n    }\n  }\n\n  onChange = (value) => {\n    if (value === this.props.currentSortBy) return;\n    this.updateQuerySortBy(value);\n  };\n\n  render() {\n    const {\n      currentSortBy,\n      loading,\n      totalResults,\n      label,\n      overridableId,\n    } = this.props;\n    return (\n      <ShouldRender\n        condition={currentSortBy !== null && !loading && totalResults > 0}\n      >\n        {label(\n          <Element\n            currentSortBy={currentSortBy}\n            options={this.options}\n            onValueChange={this.onChange}\n            overridableId={overridableId}\n          />\n        )}\n      </ShouldRender>\n    );\n  }\n}\n\nSortBy.propTypes = {\n  values: PropTypes.array.isRequired,\n  defaultValue: PropTypes.string.isRequired,\n  defaultValueOnEmptyString: PropTypes.string,\n  loading: PropTypes.bool.isRequired,\n  totalResults: PropTypes.number.isRequired,\n  currentSortBy: PropTypes.string,\n  currentQueryString: PropTypes.string.isRequired,\n  updateQuerySortBy: PropTypes.func.isRequired,\n  setInitialState: PropTypes.func.isRequired,\n  label: PropTypes.func,\n  overridableId: PropTypes.string,\n};\n\nSortBy.defaultProps = {\n  defaultValueOnEmptyString: null,\n  currentSortBy: null,\n  label: (cmp) => cmp,\n  overridableId: '',\n};\n\nconst Element = ({ overridableId, ...props }) => {\n  const { currentSortBy, options, onValueChange } = props;\n  const _options = options.map((element, index) => {\n    return { key: index, text: element.text, value: element.value };\n  });\n  return (\n    <Overridable id={buildUID('SortBy.element', overridableId)} {...props}>\n      <Dropdown\n        selection\n        compact\n        options={_options}\n        value={currentSortBy}\n        onChange={(e, { value }) => onValueChange(value)}\n      />\n    </Overridable>\n  );\n};\n\nexport default Overridable.component('SortBy', SortBy);\n","/*\n * This file is part of React-SearchKit.\n * Copyright (C) 2018 CERN.\n *\n * React-SearchKit is free software; you can redistribute it and/or modify it\n * under the terms of the MIT License; see LICENSE file for more details.\n */\n\nimport { connect } from '../../store';\nimport { updateQuerySortBy, setInitialState } from '../../state/actions';\nimport SortByComponent from './SortBy';\nconst mapDispatchToProps = dispatch => ({\n  updateQuerySortBy: sortByValue => dispatch(updateQuerySortBy(sortByValue)),\n  setInitialState: value => dispatch(setInitialState(value)),\n});\n\nexport const SortBy = connect(\n  state => ({\n    loading: state.results.loading,\n    totalResults: state.results.data.total,\n    currentSortBy: state.query.sortBy,\n    currentQueryString: state.query.queryString,\n  }),\n  mapDispatchToProps\n)(SortByComponent);\n","/*\n * This file is part of React-SearchKit.\n * Copyright (C) 2018-2019 CERN.\n *\n * React-SearchKit is free software; you can redistribute it and/or modify it\n * under the terms of the MIT License; see LICENSE file for more details.\n */\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Dropdown } from 'semantic-ui-react';\nimport Overridable from 'react-overridable';\nimport { ShouldRender } from '../ShouldRender';\nimport { buildUID } from '../../util';\n\nclass SortOrder extends Component {\n  constructor(props) {\n    super(props);\n    this.options = props.values;\n    this.defaultValue = this.props.defaultValue;\n    this.updateQuerySortOrder = props.updateQuerySortOrder;\n    this.setInitialState = props.setInitialState;\n  }\n\n  componentDidMount() {\n    if (this.props.currentSortOrder === null) {\n      this.setInitialState({\n        sortOrder: this.defaultValue,\n      });\n    }\n  }\n\n  onChange = (value) => {\n    if (value === this.props.currentSortOrder) return;\n    this.updateQuerySortOrder(value);\n  };\n\n  render() {\n    const {\n      currentSortOrder,\n      loading,\n      totalResults,\n      label,\n      overridableId,\n    } = this.props;\n    return (\n      <ShouldRender\n        condition={currentSortOrder !== null && !loading && totalResults > 0}\n      >\n        {label(\n          <Element\n            currentSortOrder={currentSortOrder}\n            options={this.options}\n            onValueChange={this.onChange}\n            overridableId={overridableId}\n          />\n        )}\n      </ShouldRender>\n    );\n  }\n}\n\nSortOrder.propTypes = {\n  values: PropTypes.array.isRequired,\n  defaultValue: PropTypes.string.isRequired,\n  currentSortOrder: PropTypes.string,\n  loading: PropTypes.bool.isRequired,\n  totalResults: PropTypes.number.isRequired,\n  updateQuerySortOrder: PropTypes.func.isRequired,\n  setInitialState: PropTypes.func.isRequired,\n  label: PropTypes.func,\n  overridableId: PropTypes.string,\n};\n\nSortOrder.defaultProps = {\n  currentSortOrder: null,\n  label: (cmp) => cmp,\n  overridableId: '',\n};\n\nconst Element = ({ overridableId, ...props }) => {\n  const { currentSortOrder, options, onValueChange } = props;\n  const _options = options.map((element, index) => {\n    return { key: index, text: element.text, value: element.value };\n  });\n  return (\n    <Overridable id={buildUID('SortOrder.element', overridableId)} {...props}>\n      <Dropdown\n        selection\n        compact\n        options={_options}\n        value={currentSortOrder}\n        onChange={(e, { value }) => onValueChange(value)}\n      />\n    </Overridable>\n  );\n};\n\nexport default Overridable.component('SortOrder', SortOrder);\n","/*\n * This file is part of React-SearchKit.\n * Copyright (C) 2018 CERN.\n *\n * React-SearchKit is free software; you can redistribute it and/or modify it\n * under the terms of the MIT License; see LICENSE file for more details.\n */\n\nimport { connect } from '../../store';\nimport { updateQuerySortOrder, setInitialState } from '../../state/actions';\nimport SortOrderComponent from './SortOrder';\n\nconst mapDispatchToProps = dispatch => ({\n  updateQuerySortOrder: sortOrderValue =>\n    dispatch(updateQuerySortOrder(sortOrderValue)),\n  setInitialState: value => dispatch(setInitialState(value)),\n});\n\nexport const SortOrder = connect(\n  state => ({\n    loading: state.results.loading,\n    totalResults: state.results.data.total,\n    currentSortOrder: state.query.sortOrder,\n  }),\n  mapDispatchToProps\n)(SortOrderComponent);\n","/*\n * This file is part of React-SearchKit.\n * Copyright (C) 2019 CERN.\n *\n * React-SearchKit is free software; you can redistribute it and/or modify it\n * under the terms of the MIT License; see LICENSE file for more details.\n */\n\nimport React from 'react';\nimport { connect } from '../../store';\nimport { updateQueryState } from '../../state/actions';\n\nexport function withState(Component) {\n  const WrappedComponent = ({ dispatch, ...props }) => <Component {...props} />;\n  const mapStateToProps = state => ({\n    currentQueryState: state.query,\n    currentResultsState: state.results,\n  });\n\n  const mapDispatchToProps = dispatch => ({\n    updateQueryState: queryState => dispatch(updateQueryState(queryState)),\n  });\n\n  return connect(mapStateToProps, mapDispatchToProps)(WrappedComponent);\n}\n","export const onQueryChanged = payload => {\n  var evt = new CustomEvent('queryChanged', {\n    detail: payload,\n  });\n  window.dispatchEvent(evt);\n};\n"],"names":["ESRequestSerializer","serialize","bind","stateQuery","queryString","sortBy","sortOrder","page","size","bodyParams","_isEmpty","query_string","query","sortObj","s","from","ESResponseSerializer","payload","aggregations","hits","map","hit","_source","total","value","undefined","require$$0","ESSearchApi","config","axiosConfig","_get","validateAxiosConfig","initSerializers","initInterceptors","initAxios","search","_hasIn","Error","requestInterceptor","responseInterceptor","requestSerializerCls","responseSerializerCls","requestSerializer","responseSerializer","http","axios","create","addInterceptors","interceptors","request","use","resolve","reject","method","data","response","InvenioRequestSerializer","_addFilter","filter","filterUrlParams","Array","isArray","length","aggName","fieldValue","hasChild","_addFilters","filters","forEach","getParams","filterParams","_extend","Qs","stringify","arrayFormat","InvenioResponseSerializer","defineProperty","InvenioSearchApi","paramsSerializer","params","getPrototypeOf","superPropBase","setPrototypeOf","assertThisInitialized","isNativeReflectConstruct","possibleConstructorReturn","InvenioSuggestionRequestSerializer","queryField","suggestionString","encode","InvenioSuggestionResponseSerializer","responseField","_serializeSuggestions","responseHits","Set","metadata","responseFieldPath","split","suggestions","InvenioSuggestionApi","invenio","pushHistory","window","history","pushState","path","replaceHistory","replaceState","UrlParser","_sanitizeParamValue","parsedValue","parseInt","_isNaN","_value","JSON","parse","_isNil","e","console","error","parsedParams","ignoreQueryPrefix","Object","entries","entry","key","UrlParamValidator","isValid","UrlHandlerApi","_filterListToString","childFilter","urlFilterSeparator","concat","_mapQueryStateToUrlParams","queryState","keys","stateKey","urlParamsMapping","paramKey","addQueryPrefix","skipNulls","indices","_filterStringToList","filterStr","childSepPos","indexOf","aggNamePos","slice","end","filterList","push","_mapUrlParamsToQueryState","urlParamsObj","result","urlParamValidator","queryStateKey","fromUrlParamsMapping","_mergeParamsIntoState","urlStateObj","_queryState","_cloneDeep","_isObject","layout","keepHistory","_isBoolean","_isString","urlParser","get","set","replace","location","newQueryState","newUrlParams","SET_QUERY_COMPONENT_INITIAL_STATE","SET_QUERY_STRING","SET_QUERY_SORTING","SET_QUERY_SORT_BY","SET_QUERY_SORT_ORDER","SET_QUERY_STATE","SET_QUERY_PAGINATION_PAGE","SET_QUERY_PAGINATION_SIZE","SET_QUERY_FILTERS","SET_QUERY_SUGGESTIONS","SET_SUGGESTION_STRING","CLEAR_QUERY_SUGGESTIONS","RESULTS_LOADING","RESULTS_FETCH_SUCCESS","RESULTS_FETCH_ERROR","RESULTS_UPDATE_LAYOUT","RESET_QUERY","startsWith","first","second","toString","array","q","str","removeLastChild","arr","lastChild","updateFilter","queryFilter","stateFilters","strQuery","strStateFilters","stateObjQuery","anyRemoved","filteredStrStates","strStateFilter","childFilterExists","parentFilterExists","strState","updateQueryFilters","_isArray","_head","tempStateFilters","_forEach","updateQueryState","oldState","newState","storeKeys","pickedState","_pick","INITIAL_STORE_STATE","STORE_KEYS","state","action","type","loading","combineReducers","queryReducer","results","resultsReducer","configureStore","appConfig","initialQueryState","initialResultsState","searchOnInit","preloadedQueryState","urlHandlerApi","preloadedState","createStore","rootReducer","applyMiddleware","thunk","withExtraArgument","connectExtended","mapStateToProps","mapDispatchToProps","mergeProps","connect","setInitialState","initialState","dispatch","onAppInitialized","executeQuery","shouldUpdateUrlQueryString","updateQueryString","updateQuerySorting","sortByValue","sortOrderValue","updateQuerySortBy","updateQuerySortOrder","updateQueryPaginationPage","updateQueryPaginationSize","updateResultsLayout","getState","newStateQuery","resetQuery","shouldReplaceUrlQueryString","searchApi","updateSuggestions","executeSuggestionQuery","suggestionApi","clearSuggestions","objectWithoutPropertiesLoose","buildUID","elementName","overridableId","ActiveFilters","props","_getLabel","currentFilter","label","activeFilter","Component","defaultProps","renderElement","Element","removeActiveFilter","getLabel","index","Overridable","component","ActiveFiltersComponent","BucketAggregationValues","_isSelected","selectedFilters","getChildAggCmps","bucket","hasChildAggregation","childAgg","selectedChildFilters","childBuckets","isThisAggregation","isThisValue","onFilterClicked","field","buckets","valuesCmp","isSelected","ValueElement","doc_count","childAggCmps","ContainerElement","BucketAggregation","_renderValues","resultBuckets","agg","_getSelectedFilters","userSelectionFilters","_getResultBuckets","resultsAggregations","thisAggs","title","renderValuesContainerElement","renderValueElement","containerCmp","BucketAggregationComponent","AutocompleteSearchBar","_handleAutocompleteChange","minCharsToAutocomplete","onInputChange","setState","currentValue","handleAutocompleteChange","executeSearch","debounce","_","debounceTime","leading","placeholder","AutocompleteSearchBarUncontrolled","querySuggestions","onBtnSearchClick","event","input","onKeyPress","content","onClick","Suggestions","onSuggestionSelected","suggestion","text","AutocompleteSearchBarComponent","ShouldRender","condition","children","Count","totalResults","cmp","CountComponent","EmptyResults","EmptyResultsComponent","ErrorComponent","LayoutSwitcher","onLayoutChange","layoutName","updateLayout","defaultValue","defaultLayout","currentLayout","clickHandler","name","LayoutSwitcherComponent","ResultsLoader","ResultsLoaderComponent","Pagination","onPageChange","activePage","currentPage","updateQueryPage","currentSize","options","boundaryRangeCount","siblingRangeCount","showEllipsis","showFirst","showLast","showPrev","showNext","extraParams","pages","Math","ceil","_onPageChange","Paginator","PaginationComponent","Bootstrap","onQueryChanged","detail","appReceiverName","appName","searchQuery","debug","eventListenerEnabled","searchOnUrlQueryStringChanged","addEventListener","onpopstate","historyUnlisten","removeEventListener","_onAppInitialized","BootstrapComponent","ReactSearchKit","enabled","customHandler","overrideConfig","defaultSortByOnEmptyQuery","store","ResultsGrid","resultsPerRow","GridItem","id","imgSrc","description","_results","ResultsGridComponent","ResultsList","ListItem","ResultsListComponent","ResultsMultiLayout","ResultsMultiLayoutComponent","ResultsPerPage","onChange","updateQuerySize","values","onValueChange","_options","element","ResultsPerPageComponent","SearchBar","SearchBarUncontrolled","passedPlaceholder","SearchBarComponent","Sort","_computeValue","currentSortBy","currentSortOrder","selected","find","option","default","defaultValueOnEmptyString","defaultOnEmptyString","currentQueryString","computeValue","SortComponent","SortBy","SortByComponent","SortOrder","SortOrderComponent","withState","WrappedComponent","currentQueryState","currentResultsState","evt","CustomEvent","dispatchEvent"],"mappings":"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"}